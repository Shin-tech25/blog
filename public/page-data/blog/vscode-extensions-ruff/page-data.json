{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/vscode-extensions-ruff/","result":{"data":{"site":{"siteMetadata":{"title":"Developer's blog"}},"markdownRemark":{"id":"1ab529d1-e9dd-553a-af6d-2d113b088c21","excerpt":"Python のプロジェクト開発において、コードの見た目の統一や品質管理は非常に重要です。 従来は、Black や Flake8 など複数のツールを組み合わせて使用していました。 Black: Black はコードフォーマッターであり、コードのスタイルを自動的に整形します。PEP…","tableOfContents":"<ul>\n<li>\n<p><a href=\"#ruff-%E3%81%A8%E3%81%AF\">Ruff とは？</a></p>\n</li>\n<li>\n<p><a href=\"#vscode-%E3%81%B8%E3%81%AE-ruff-%E3%81%AE%E5%B0%8E%E5%85%A5\">VSCode への Ruff の導入</a></p>\n<ul>\n<li><a href=\"#vscode-%E6%8B%A1%E5%BC%B5%E6%A9%9F%E8%83%BD%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\">VSCode 拡張機能のインストール</a></li>\n<li><a href=\"#python-%E7%92%B0%E5%A2%83%E3%81%B8%E3%81%AE-ruff-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3\">Python 環境への Ruff のインストール（オプション）</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E8%A8%AD%E5%AE%9Apyprojecttoml-%E3%81%AE%E6%B4%BB%E7%94%A8\">プロジェクト設定：pyproject.toml の活用</a></p>\n<ul>\n<li><a href=\"#pyprojecttoml-%E3%81%AE%E4%BD%9C%E6%88%90%E4%BE%8B\">pyproject.toml の作成例</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#vscode-%E3%81%AE%E8%A8%AD%E5%AE%9Asettingsjson-%E3%81%AE%E6%A7%8B%E6%88%90\">VSCode の設定：settings.json の構成</a></p>\n<ul>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E8%A8%AD%E5%AE%9A%E4%BE%8B\">基本設定例</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E5%88%A9%E7%94%A8%E4%BE%8B%E3%81%A8%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA\">利用例とカスタマイズ</a></p>\n<ul>\n<li><a href=\"#%E8%87%AA%E5%8B%95%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88%E3%81%AE%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\">自動フォーマットの動作確認</a></li>\n<li><a href=\"#%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%84%E8%AD%A6%E5%91%8A%E3%81%AE%E7%A2%BA%E8%AA%8D\">エラーや警告の確認</a></li>\n<li><a href=\"#%E9%AB%98%E5%BA%A6%E3%81%AA%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA\">高度なカスタマイズ</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\">まとめ</a></p>\n</li>\n</ul>","html":"<p>Python のプロジェクト開発において、コードの見た目の統一や品質管理は非常に重要です。</p>\n<p>従来は、Black や Flake8 など複数のツールを組み合わせて使用していました。</p>\n<ul>\n<li>Black: Black はコードフォーマッターであり、コードのスタイルを自動的に整形します。PEP 8 に準拠したフォーマットを適用し、開発者間で一貫したコードスタイルを維持することができます。例えば、関数の引数間のスペースやインデントの統一などを自動で行います。</li>\n<li>Flake8: 静的コード解析ツール（リンター）で、コード内の潜在的なバグやスタイル違反を検出します。未使用の変数やインポート、適切でないインデントなど、コードの品質や可読性に影響を与える問題を指摘します。また、プラグインを追加することで、機能を拡張することも可能です。</li>\n</ul>\n<p>このように、開発の際に、最初に Black でフォーマッティングを行い、その上で Flake8 で静的解析を行うのが主流でした。</p>\n<p>Ruff は Black のフォーマッティングと Flake8 の静的解析の機能を統合し、高速に動作する新しいツールとして最近注目されています。</p>\n<p>本記事では、Visual Studio Code（VSCode）上で Ruff を活用し、コードフォーマットと静的解析を自動化するための詳細な手順と設定方法を解説します。</p>\n<ul>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=charliermarsh.ruff&#x26;utm_source=chatgpt.com\">Ruff - Visual Studio Marketplace</a></li>\n</ul>\n<h2 id=\"ruff-とは\" style=\"position:relative;\"><a href=\"#ruff-%E3%81%A8%E3%81%AF\" aria-label=\"ruff とは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ruff とは？</h2>\n<p><strong>Ruff</strong>は Rust で実装された Python 用のリンター兼フォーマッターです。</p>\n<p>以下の特徴があります。</p>\n<ul>\n<li><strong>高速動作</strong>：従来のツールに比べて処理速度が非常に速い</li>\n<li><strong>多機能統合</strong>：Flake8、Black、isort、pyupgrade などの機能を 1 つにまとめ、個別のツールを導入する手間を省く</li>\n<li><strong>シンプルな設定</strong>：<code class=\"language-text\">pyproject.toml</code>に設定をまとめ、プロジェクトごとにルールを統一できる</li>\n</ul>\n<h2 id=\"vscode-への-ruff-の導入\" style=\"position:relative;\"><a href=\"#vscode-%E3%81%B8%E3%81%AE-ruff-%E3%81%AE%E5%B0%8E%E5%85%A5\" aria-label=\"vscode への ruff の導入 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VSCode への Ruff の導入</h2>\n<p>早速 VSCode に Ruff を導入してみましょう。VSCode で Ruff を利用するためには、2 つの方法があります。</p>\n<ol>\n<li><strong>VSCode 拡張機能</strong>として Ruff をインストールする</li>\n<li><strong>Python 環境に Ruff をインストールする（オプション）</strong></li>\n</ol>\n<p>Python 環境に Ruff をインストールするのはオプションです。プロジェクト固有のルールで Ruff を設定する場合に利用するには Python 環境に Ruff を入れます。基本的なコードチェックやフォーマットであれば、VSCode のバンドルされた Ruff だけで十分です。</p>\n<h3 id=\"vscode-拡張機能のインストール\" style=\"position:relative;\"><a href=\"#vscode-%E6%8B%A1%E5%BC%B5%E6%A9%9F%E8%83%BD%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\" aria-label=\"vscode 拡張機能のインストール permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VSCode 拡張機能のインストール</h3>\n<ol>\n<li>\n<p><strong>拡張機能ビューの起動</strong></p>\n<ul>\n<li>サイドバーの四角形アイコン、または <code class=\"language-text\">Ctrl + Shift + X</code>（macOS は <code class=\"language-text\">Cmd + Shift + X</code>）を押します。</li>\n</ul>\n</li>\n<li>\n<p><strong>「Ruff」で検索</strong></p>\n<ul>\n<li>検索結果に表示される拡張機能（例: <strong>Ruff</strong> by Astral Software）をインストールします。</li>\n</ul>\n</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/06e0628d2e98b50d6ce4cc05f259133b/08037/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.67088607594937%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABpklEQVR42n1Ry27bMBD0P6SnRNSDkiw+9CApyULl2KkNJEiBnAoUrQ/5Cqe9+LP6Df2u6ZJugKQNchgMsEvOzu4sPu32WK832BFP00dUVQWec6ilxMpY1KoJtTjJkGUZOKHgSeA0TUPtJRan0wnH4w8cn37i2/cDougKHy4ucThs8Ov3Izrh4MYBqnYQUkFpBasKGiTAeY44jl9hcXt3B+cchmGAMQaMMRJlaJTGdu5Rixpdd3aZpBk5TYk50iwNDv8TnOcZ4zhic32N3lkSi6jBgkBeLFF65gUhQ0mnyLMELLoEu2KIWYwkSV5hsb7ZBaHNdhscekHvUusW99sZn29o2N5gtXuAu/0Ks/8CMd2jWVuUpjwLJy8cSrpLWZZQSkEIAUZFRqKSBMfeobctXN/BuAGdW8EME1rTw7oWUlUUBP8bCD879Ks9oyiKMIWxCEu6XWPGgNZNaDqLptaoCZqCqXVNrFGQmee03xFk8M5b69M1qLSldMmRlGELIUVg6Zlq+ZK2JAMphfWmoL+jn+56i7YhV1pQLw+n+Rf+T069qvJvSvwB8MANbglLw/kAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"\"\n        src=\"/static/06e0628d2e98b50d6ce4cc05f259133b/f058b/image.png\"\n        srcset=\"/static/06e0628d2e98b50d6ce4cc05f259133b/c26ae/image.png 158w,\n/static/06e0628d2e98b50d6ce4cc05f259133b/6bdcf/image.png 315w,\n/static/06e0628d2e98b50d6ce4cc05f259133b/f058b/image.png 630w,\n/static/06e0628d2e98b50d6ce4cc05f259133b/40601/image.png 945w,\n/static/06e0628d2e98b50d6ce4cc05f259133b/78612/image.png 1260w,\n/static/06e0628d2e98b50d6ce4cc05f259133b/08037/image.png 1379w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"python-環境への-ruff-のインストールオプション\" style=\"position:relative;\"><a href=\"#python-%E7%92%B0%E5%A2%83%E3%81%B8%E3%81%AE-ruff-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3\" aria-label=\"python 環境への ruff のインストールオプション permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Python 環境への Ruff のインストール（オプション）</h3>\n<p>VSCode 拡張機能のみでも利用は可能ですが、プロジェクトごとに異なるバージョンや高度な設定を行いたい場合は、Python 環境（仮想環境など）に Ruff をインストールすることを推奨します。</p>\n<ol>\n<li>\n<p><strong>ターミナルの起動</strong></p>\n<ul>\n<li>VSCode のメニューから「ターミナル > 新しいターミナル」を選択</li>\n</ul>\n</li>\n<li>\n<p><strong>仮想環境の作成（推奨）</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">python <span class=\"token parameter variable\">-m</span> venv <span class=\"token function\">env</span></code></pre></div>\n<ul>\n<li>作成した仮想環境を有効化します（OS に応じてコマンドが異なります）。</li>\n</ul>\n</li>\n<li>\n<p><strong>Ruff のインストール</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> ruff</code></pre></div>\n</li>\n</ol>\n<p>この方法でインストールした Ruff は、VSCode 設定で利用するように切り替えることも可能です。<br>\nたとえば、<code class=\"language-text\">settings.json</code>で</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"ruff.importStrategy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"fromEnvironment\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>と指定すると、システムや仮想環境にインストールされた Ruff を使用します。</p>\n<h2 id=\"プロジェクト設定pyprojecttoml-の活用\" style=\"position:relative;\"><a href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E8%A8%AD%E5%AE%9Apyprojecttoml-%E3%81%AE%E6%B4%BB%E7%94%A8\" aria-label=\"プロジェクト設定pyprojecttoml の活用 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プロジェクト設定：pyproject.toml の活用</h2>\n<p>VSCode 上で Ruff をプロジェクト固有のルールで運用するためには、ルートディレクトリに設定ファイル <code class=\"language-text\">pyproject.toml</code> を配置します。</p>\n<h3 id=\"pyprojecttoml-の作成例\" style=\"position:relative;\"><a href=\"#pyprojecttoml-%E3%81%AE%E4%BD%9C%E6%88%90%E4%BE%8B\" aria-label=\"pyprojecttoml の作成例 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>pyproject.toml の作成例</h3>\n<p>以下は基本的な設定例です。必要に応じてルールや無視設定を追加してください。</p>\n<div class=\"gatsby-highlight\" data-language=\"toml\"><pre class=\"language-toml\"><code class=\"language-toml\"><span class=\"token punctuation\">[</span><span class=\"token table class-name\">tool.ruff</span><span class=\"token punctuation\">]</span>\n<span class=\"token key property\">line-length</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">88</span>             <span class=\"token comment\"># 1行の最大文字数</span>\n<span class=\"token key property\">target-version</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"py39\"</span>        <span class=\"token comment\"># 対象とするPythonのバージョン</span>\n<span class=\"token key property\">select</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"E\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"F\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"I\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"B\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"C4\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"UP\"</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># 有効にするLintルール</span>\n<span class=\"token key property\">ignore</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"E501\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"B008\"</span><span class=\"token punctuation\">]</span>      <span class=\"token comment\"># 無視するルールの指定</span></code></pre></div>\n<p><strong>ポイント</strong>:</p>\n<ul>\n<li>この設定により、プロジェクト全体で一貫した Linting とコードフォーマットルールが適用されます。</li>\n<li>Ruff は、<code class=\"language-text\">pyproject.toml</code>が存在する場合にその設定を自動的に読み込みます。</li>\n</ul>\n<h2 id=\"vscode-の設定settingsjson-の構成\" style=\"position:relative;\"><a href=\"#vscode-%E3%81%AE%E8%A8%AD%E5%AE%9Asettingsjson-%E3%81%AE%E6%A7%8B%E6%88%90\" aria-label=\"vscode の設定settingsjson の構成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VSCode の設定：settings.json の構成</h2>\n<p>VSCode の設定ファイル（<code class=\"language-text\">.vscode/settings.json</code>）を編集して、Ruff を効果的に利用できるようにします。</p>\n<h3 id=\"基本設定例\" style=\"position:relative;\"><a href=\"#%E5%9F%BA%E6%9C%AC%E8%A8%AD%E5%AE%9A%E4%BE%8B\" aria-label=\"基本設定例 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>基本設定例</h3>\n<p>以下は、Python ファイル保存時に自動でコードフォーマットと Lint 修正を実行する設定例です。</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"[python]\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"editor.formatOnSave\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"editor.defaultFormatter\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"charliermarsh.ruff\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"editor.codeActionsOnSave\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"source.fixAll\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"source.organizeImports\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"ruff.linting.enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"ruff.configPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${workspaceFolder}/pyproject.toml\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"ruff.configSource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"filesystemFirst\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>各設定項目の解説</strong>:</p>\n<ul>\n<li><code class=\"language-text\">\"editor.formatOnSave\": true</code><br>\n保存時に自動でフォーマットを実行する設定です。</li>\n<li><code class=\"language-text\">\"editor.defaultFormatter\": \"charliermarsh.ruff\"</code><br>\nRuff をデフォルトのフォーマッターとして指定します。</li>\n<li><code class=\"language-text\">\"editor.codeActionsOnSave\": { \"source.fixAll\": true, \"source.organizeImports\": true }</code><br>\n保存時に自動でコードの修正およびインポートの整理を行います。</li>\n<li><code class=\"language-text\">\"ruff.linting.enabled\": true</code><br>\nVSCode 上で Ruff による Lint チェックを有効にします。</li>\n<li><code class=\"language-text\">\"ruff.configPath\": \"${workspaceFolder}/pyproject.toml\"</code><br>\nプロジェクトのルートにある設定ファイルを読み込むよう指定します。</li>\n<li><code class=\"language-text\">\"ruff.configSource\": \"filesystemFirst\"</code><br>\nファイルシステム上の設定（pyproject.toml など）を優先させる設定です。<br>\n※ これにより、VSCode のデフォルト設定よりもプロジェクト固有の設定が反映されます。</li>\n</ul>\n<h2 id=\"利用例とカスタマイズ\" style=\"position:relative;\"><a href=\"#%E5%88%A9%E7%94%A8%E4%BE%8B%E3%81%A8%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA\" aria-label=\"利用例とカスタマイズ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>利用例とカスタマイズ</h2>\n<h3 id=\"自動フォーマットの動作確認\" style=\"position:relative;\"><a href=\"#%E8%87%AA%E5%8B%95%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88%E3%81%AE%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-label=\"自動フォーマットの動作確認 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>自動フォーマットの動作確認</h3>\n<p>VSCode で Python ファイルを編集し、保存（Ctrl+S または Cmd+S）すると、Ruff が自動でコードフォーマットと Lint 修正を実行します。</p>\n<ul>\n<li>インデントや改行、不要なスペースの整理が行われ、コードが整然とします。</li>\n</ul>\n<h3 id=\"エラーや警告の確認\" style=\"position:relative;\"><a href=\"#%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%84%E8%AD%A6%E5%91%8A%E3%81%AE%E7%A2%BA%E8%AA%8D\" aria-label=\"エラーや警告の確認 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>エラーや警告の確認</h3>\n<p>ファイル内にルール違反がある場合、VSCode の「問題」パネルに警告やエラーが表示されます。</p>\n<ul>\n<li>これにより、リアルタイムでコードの品質を維持でき、潜在的なバグを早期に発見できます。</li>\n</ul>\n<h3 id=\"高度なカスタマイズ\" style=\"position:relative;\"><a href=\"#%E9%AB%98%E5%BA%A6%E3%81%AA%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA\" aria-label=\"高度なカスタマイズ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>高度なカスタマイズ</h3>\n<p>プロジェクトごとに細かいルールの調整が必要な場合、<code class=\"language-text\">pyproject.toml</code>で設定をカスタマイズします。</p>\n<ul>\n<li>例: 特定のエラーコードを無視する、特定のルールのみを有効にするなど。</li>\n<li>詳細は<a href=\"https://docs.astral.sh/ruff/configuration/\">Ruff の公式ドキュメント</a>を参照してください。</li>\n</ul>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>VSCode で Ruff を活用することで、以下のメリットが得られます：</p>\n<ul>\n<li><strong>高速なコードフォーマット</strong>：保存時に自動でコードが整形され、可読性が向上します。</li>\n<li><strong>静的解析の自動化</strong>：Lint 警告やエラーをリアルタイムで把握でき、バグの早期発見につながります。</li>\n<li><strong>プロジェクト固有のルール管理</strong>：<code class=\"language-text\">pyproject.toml</code>を用いて、チーム全体で一貫したコードスタイルを維持できます。</li>\n<li><strong>シンプルな設定</strong>：VSCode の拡張機能と設定ファイルを用いることで、導入や運用が容易になります。</li>\n</ul>","frontmatter":{"title":"VSCodeでRuffを用いて静的解析、コードフォーマットを自動化する","date":"2025-02-19","description":"VSCode上でRuffを導入し、Pythonのコードフォーマットと静的解析を自動化する手順と設定方法を詳しく解説します。","tags":["VSCode","Python","Ruff","静的解析"],"featuredImage":{"publicURL":"/static/b7a46c634589fb048b6e741c478a235f/visual-studio-code-icon.png","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/static/b7a46c634589fb048b6e741c478a235f/ccc41/visual-studio-code-icon.png","srcSet":"/static/b7a46c634589fb048b6e741c478a235f/bf8e1/visual-studio-code-icon.png 128w,\n/static/b7a46c634589fb048b6e741c478a235f/acb7c/visual-studio-code-icon.png 256w,\n/static/b7a46c634589fb048b6e741c478a235f/ccc41/visual-studio-code-icon.png 512w","sizes":"(min-width: 512px) 512px, 100vw"},"sources":[{"srcSet":"/static/b7a46c634589fb048b6e741c478a235f/6766a/visual-studio-code-icon.webp 128w,\n/static/b7a46c634589fb048b6e741c478a235f/22bfc/visual-studio-code-icon.webp 256w,\n/static/b7a46c634589fb048b6e741c478a235f/d689f/visual-studio-code-icon.webp 512w","type":"image/webp","sizes":"(min-width: 512px) 512px, 100vw"}]},"width":512,"height":512}}}}},"relatedPosts":{"nodes":[{"fields":{"slug":"/python-flake8/"},"frontmatter":{"title":"Flake8によるPythonの静的解析、リファクタリング","date":"2024-10-09","tags":["Python","外部ライブラリ","静的解析"],"description":"Flake8はPythonコードのスタイルガイドやプログラミングのベストプラクティスに基づいて、コードを自動的にチェックするためのツールです。具体的には、PythonコードのPEP 8（Pythonのスタイルガイド）準拠をチェックし、コードの品質を高めるための静的解析を行います。","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/static/58806ff8f67ddf870a8d9902f47dcd61/3c367/python2.jpg","srcSet":"/static/58806ff8f67ddf870a8d9902f47dcd61/19e71/python2.jpg 128w,\n/static/58806ff8f67ddf870a8d9902f47dcd61/68974/python2.jpg 256w,\n/static/58806ff8f67ddf870a8d9902f47dcd61/3c367/python2.jpg 512w","sizes":"(min-width: 512px) 512px, 100vw"},"sources":[{"srcSet":"/static/58806ff8f67ddf870a8d9902f47dcd61/6766a/python2.webp 128w,\n/static/58806ff8f67ddf870a8d9902f47dcd61/22bfc/python2.webp 256w,\n/static/58806ff8f67ddf870a8d9902f47dcd61/d689f/python2.webp 512w","type":"image/webp","sizes":"(min-width: 512px) 512px, 100vw"}]},"width":512,"height":512}}}}}]},"previous":{"fields":{"slug":"/python-urllib-request/"},"frontmatter":{"title":"PythonでHTTPリクエストを送る - urllib.request"}},"next":{"fields":{"slug":"/python-enum2/"},"frontmatter":{"title":"PythonのEnumを用いて複数ステータスをビット演算で管理する"}}},"pageContext":{"id":"1ab529d1-e9dd-553a-af6d-2d113b088c21","previousPostId":"2551b0ba-fb6d-586d-9294-cc22c460cbc1","nextPostId":"e9d4280e-abbf-5594-99ac-dc7c35ffe247","relatedPosts":["/python-flake8/"]}},"staticQueryHashes":["2841359383"],"slicesMap":{}}