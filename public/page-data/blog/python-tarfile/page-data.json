{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/python-tarfile/","result":{"data":{"site":{"siteMetadata":{"title":"Developer's blog"}},"markdownRemark":{"id":"ac3b01ab-695e-5f73-9f26-ade670037d19","excerpt":"Python 標準ライブラリのモジュールは、tar 形式のアーカイブファイルを Python コードから操作するための便利なツールです。このモジュールを使用すると、tar アーカイブの作成、展開、内容確認など、tar コマンドを使用せずに実行できます。また、gzip（）、bz2（）、lzma…","tableOfContents":"<ul>\n<li>\n<p><a href=\"#1-%E6%A6%82%E8%A6%81\">1. 概要</a></p>\n</li>\n<li>\n<p><a href=\"#2-tar-%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%82%92%E6%93%8D%E4%BD%9C%E3%81%99%E3%82%8B\">2. tar アーカイブを操作する</a></p>\n<ul>\n<li>\n<p><a href=\"#21-tar-%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%82%92%E9%96%8B%E3%81%8F\">2.1 tar アーカイブを開く</a></p>\n<ul>\n<li><a href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B\">使用例</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#22-tar-%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\">2.2 tar アーカイブの中身を確認する</a></p>\n<ul>\n<li><a href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B-1\">使用例</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-tar-%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\">3. tar アーカイブを作成する</a></p>\n<ul>\n<li>\n<p><a href=\"#31-tar-%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%82%92%E6%96%B0%E8%A6%8F%E4%BD%9C%E6%88%90\">3.1 tar アーカイブを新規作成</a></p>\n<ul>\n<li><a href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B-2\">使用例</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#4-tar-%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%82%92%E5%B1%95%E9%96%8B%E3%81%99%E3%82%8B\">4. tar アーカイブを展開する</a></p>\n<ul>\n<li>\n<p><a href=\"#41-%E3%81%99%E3%81%B9%E3%81%A6%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E5%B1%95%E9%96%8B\">4.1 すべてのファイルを展開</a></p>\n<ul>\n<li><a href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B-3\">使用例</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#42-%E7%89%B9%E5%AE%9A%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E5%B1%95%E9%96%8B\">4.2 特定のファイルを展開</a></p>\n<ul>\n<li><a href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B-4\">使用例</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#5-%E3%82%88%E3%81%8F%E3%81%82%E3%82%8B%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%A8%E5%AF%BE%E5%87%A6%E6%B3%95\">5. よくあるエラーと対処法</a></p>\n<ul>\n<li>\n<p><a href=\"#51-%E9%9D%9E-tar-%E5%BD%A2%E5%BC%8F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E9%96%8B%E3%81%93%E3%81%86%E3%81%A8%E3%81%97%E3%81%9F%E5%A0%B4%E5%90%88\">5.1 非 tar 形式ファイルを開こうとした場合</a></p>\n<ul>\n<li><a href=\"#%E5%AF%BE%E7%AD%96\">対策</a></li>\n<li><a href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B-5\">使用例</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#52-%E9%96%89%E3%81%98%E3%81%9F-tar-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%B8%E3%81%AE%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9\">5.2 閉じた tar ファイルへのアクセス</a></p>\n<ul>\n<li><a href=\"#%E5%AF%BE%E7%AD%96-1\">対策</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#6-%E5%AE%9F%E7%94%A8%E4%BE%8B\">6. 実用例</a></p>\n<ul>\n<li><a href=\"#61-%E5%A4%A7%E9%87%8F%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%81%97%E3%81%A6%E5%9C%A7%E7%B8%AE\">6.1 大量のファイルをアーカイブして圧縮</a></li>\n<li><a href=\"#62-%E5%B1%95%E9%96%8B%E5%85%88%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%81%AB%E7%89%B9%E5%AE%9A%E3%81%AE%E6%9D%A1%E4%BB%B6%E3%82%92%E9%81%A9%E7%94%A8\">6.2 展開先ディレクトリに特定の条件を適用</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#7-%E7%B5%90%E8%AB%96\">7. 結論</a></p>\n</li>\n</ul>","html":"<p>Python 標準ライブラリの<code class=\"language-text\">tarfile</code>モジュールは、tar 形式のアーカイブファイルを Python コードから操作するための便利なツールです。このモジュールを使用すると、tar アーカイブの作成、展開、内容確認など、tar コマンドを使用せずに実行できます。また、gzip（<code class=\"language-text\">.tar.gz</code>）、bz2（<code class=\"language-text\">.tar.bz2</code>）、lzma（<code class=\"language-text\">.tar.xz</code>）形式にも対応しています。本記事では、<code class=\"language-text\">tarfile</code>モジュールの基本的な使い方から応用的な活用方法までを解説します。</p>\n<h2 id=\"1-概要\" style=\"position:relative;\"><a href=\"#1-%E6%A6%82%E8%A6%81\" aria-label=\"1 概要 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 概要</h2>\n<p><code class=\"language-text\">tarfile</code>モジュールは、tar 形式のアーカイブを Python コードで扱うためのツールです。このモジュールを利用することで、以下の操作が可能になります：</p>\n<ul>\n<li>tar アーカイブの作成</li>\n<li>tar アーカイブ内の内容の確認</li>\n<li>tar アーカイブの展開</li>\n<li>tar アーカイブ内の特定のファイルの抽出</li>\n</ul>\n<p>gzip や bz2 形式で圧縮された tar アーカイブにも対応しており、幅広い場面で利用できます。</p>\n<h2 id=\"2-tar-アーカイブを操作する\" style=\"position:relative;\"><a href=\"#2-tar-%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%82%92%E6%93%8D%E4%BD%9C%E3%81%99%E3%82%8B\" aria-label=\"2 tar アーカイブを操作する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. tar アーカイブを操作する</h2>\n<h3 id=\"21-tar-アーカイブを開く\" style=\"position:relative;\"><a href=\"#21-tar-%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%82%92%E9%96%8B%E3%81%8F\" aria-label=\"21 tar アーカイブを開く permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1 tar アーカイブを開く</h3>\n<p>tar アーカイブを操作するには、<code class=\"language-text\">tarfile.open()</code>関数を使用します。この関数は以下の引数を受け取ります：</p>\n<ul>\n<li><code class=\"language-text\">name</code>：操作対象のファイル名</li>\n<li><code class=\"language-text\">mode</code>：操作モード（例：<code class=\"language-text\">'r'</code>で読み取り、<code class=\"language-text\">'w'</code>で書き込み）</li>\n<li>圧縮形式（例：<code class=\"language-text\">'gz'</code>、<code class=\"language-text\">'bz2'</code>、<code class=\"language-text\">'xz'</code>）</li>\n</ul>\n<h4 id=\"使用例\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B\" aria-label=\"使用例 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用例</h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> tarfile\n\n<span class=\"token comment\"># tarアーカイブを読み取りモードで開く</span>\ntar <span class=\"token operator\">=</span> tarfile<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'example.tar.gz'</span><span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span><span class=\"token string\">'r:gz'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># アーカイブ内のファイル名一覧を取得</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tar<span class=\"token punctuation\">.</span>getnames<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># tarアーカイブを閉じる</span>\ntar<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"22-tar-アーカイブの中身を確認する\" style=\"position:relative;\"><a href=\"#22-tar-%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" aria-label=\"22 tar アーカイブの中身を確認する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.2 tar アーカイブの中身を確認する</h3>\n<p><code class=\"language-text\">getnames()</code>メソッドを使用してアーカイブ内のファイル一覧を取得できます。</p>\n<h4 id=\"使用例-1\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B-1\" aria-label=\"使用例 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用例</h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">with</span> tarfile<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'example.tar.gz'</span><span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span><span class=\"token string\">'r:gz'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> tar<span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># ファイル名一覧を表示</span>\n    <span class=\"token keyword\">for</span> name <span class=\"token keyword\">in</span> tar<span class=\"token punctuation\">.</span>getnames<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"3-tar-アーカイブを作成する\" style=\"position:relative;\"><a href=\"#3-tar-%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\" aria-label=\"3 tar アーカイブを作成する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. tar アーカイブを作成する</h2>\n<p><code class=\"language-text\">tarfile</code>モジュールを使用すると、既存のファイルをまとめて新しい tar アーカイブを作成できます。</p>\n<h3 id=\"31-tar-アーカイブを新規作成\" style=\"position:relative;\"><a href=\"#31-tar-%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%82%92%E6%96%B0%E8%A6%8F%E4%BD%9C%E6%88%90\" aria-label=\"31 tar アーカイブを新規作成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1 tar アーカイブを新規作成</h3>\n<p><code class=\"language-text\">tarfile.open()</code>関数でモードを<code class=\"language-text\">'w'</code>（新規作成）または<code class=\"language-text\">'w:gz'</code>（gzip 形式で新規作成）に指定します。</p>\n<h4 id=\"使用例-2\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B-2\" aria-label=\"使用例 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用例</h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> tarfile\n\n<span class=\"token comment\"># tarアーカイブを作成</span>\n<span class=\"token keyword\">with</span> tarfile<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'example.tar.gz'</span><span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span><span class=\"token string\">'w:gz'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> tar<span class=\"token punctuation\">:</span>\n    tar<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token string\">'file1.txt'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ファイルを追加</span>\n    tar<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token string\">'file2.txt'</span><span class=\"token punctuation\">,</span> arcname<span class=\"token operator\">=</span><span class=\"token string\">'renamed_file2.txt'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ファイル名を変更して追加</span>\n\n<span class=\"token comment\"># 作成したアーカイブの確認</span>\n<span class=\"token keyword\">with</span> tarfile<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'example.tar.gz'</span><span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span><span class=\"token string\">'r:gz'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> tar<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tar<span class=\"token punctuation\">.</span>getnames<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"4-tar-アーカイブを展開する\" style=\"position:relative;\"><a href=\"#4-tar-%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%82%92%E5%B1%95%E9%96%8B%E3%81%99%E3%82%8B\" aria-label=\"4 tar アーカイブを展開する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. tar アーカイブを展開する</h2>\n<p><code class=\"language-text\">tarfile</code>モジュールを使用すると、tar アーカイブを簡単に展開できます。</p>\n<h3 id=\"41-すべてのファイルを展開\" style=\"position:relative;\"><a href=\"#41-%E3%81%99%E3%81%B9%E3%81%A6%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E5%B1%95%E9%96%8B\" aria-label=\"41 すべてのファイルを展開 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1 すべてのファイルを展開</h3>\n<p><code class=\"language-text\">extractall()</code>メソッドを使用してアーカイブ内のすべてのファイルを展開します。</p>\n<h4 id=\"使用例-3\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B-3\" aria-label=\"使用例 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用例</h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">with</span> tarfile<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'example.tar.gz'</span><span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span><span class=\"token string\">'r:gz'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> tar<span class=\"token punctuation\">:</span>\n    tar<span class=\"token punctuation\">.</span>extractall<span class=\"token punctuation\">(</span>path<span class=\"token operator\">=</span><span class=\"token string\">'output_dir'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 指定したディレクトリに展開</span></code></pre></div>\n<h3 id=\"42-特定のファイルを展開\" style=\"position:relative;\"><a href=\"#42-%E7%89%B9%E5%AE%9A%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E5%B1%95%E9%96%8B\" aria-label=\"42 特定のファイルを展開 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.2 特定のファイルを展開</h3>\n<p>特定のファイルのみを展開する場合は、<code class=\"language-text\">extract()</code>または<code class=\"language-text\">extractfile()</code>を使用します。</p>\n<h4 id=\"使用例-4\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B-4\" aria-label=\"使用例 4 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用例</h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">with</span> tarfile<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'example.tar.gz'</span><span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span><span class=\"token string\">'r:gz'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> tar<span class=\"token punctuation\">:</span>\n    tar<span class=\"token punctuation\">.</span>extract<span class=\"token punctuation\">(</span><span class=\"token string\">'file1.txt'</span><span class=\"token punctuation\">,</span> path<span class=\"token operator\">=</span><span class=\"token string\">'output_dir'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># file1.txtのみを展開</span>\n\n    <span class=\"token comment\"># ファイルの中身を直接読み込む</span>\n    <span class=\"token keyword\">with</span> tar<span class=\"token punctuation\">.</span>extractfile<span class=\"token punctuation\">(</span><span class=\"token string\">'file1.txt'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\n        content <span class=\"token operator\">=</span> f<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>content<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"5-よくあるエラーと対処法\" style=\"position:relative;\"><a href=\"#5-%E3%82%88%E3%81%8F%E3%81%82%E3%82%8B%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%A8%E5%AF%BE%E5%87%A6%E6%B3%95\" aria-label=\"5 よくあるエラーと対処法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. よくあるエラーと対処法</h2>\n<h3 id=\"51-非-tar-形式ファイルを開こうとした場合\" style=\"position:relative;\"><a href=\"#51-%E9%9D%9E-tar-%E5%BD%A2%E5%BC%8F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E9%96%8B%E3%81%93%E3%81%86%E3%81%A8%E3%81%97%E3%81%9F%E5%A0%B4%E5%90%88\" aria-label=\"51 非 tar 形式ファイルを開こうとした場合 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.1 非 tar 形式ファイルを開こうとした場合</h3>\n<p>非 tar 形式のファイルを<code class=\"language-text\">tarfile.open()</code>で開こうとすると、<code class=\"language-text\">ReadError</code>が発生します。</p>\n<h4 id=\"対策\" style=\"position:relative;\"><a href=\"#%E5%AF%BE%E7%AD%96\" aria-label=\"対策 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>対策</h4>\n<p>事前に<code class=\"language-text\">tarfile.is_tarfile()</code>でファイル形式を確認します。</p>\n<h4 id=\"使用例-5\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B-5\" aria-label=\"使用例 5 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用例</h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">if</span> tarfile<span class=\"token punctuation\">.</span>is_tarfile<span class=\"token punctuation\">(</span><span class=\"token string\">'example.tar.gz'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">with</span> tarfile<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'example.tar.gz'</span><span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span><span class=\"token string\">'r:gz'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> tar<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tar<span class=\"token punctuation\">.</span>getnames<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'指定されたファイルはtar形式ではありません。'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"52-閉じた-tar-ファイルへのアクセス\" style=\"position:relative;\"><a href=\"#52-%E9%96%89%E3%81%98%E3%81%9F-tar-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%B8%E3%81%AE%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9\" aria-label=\"52 閉じた tar ファイルへのアクセス permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.2 閉じた tar ファイルへのアクセス</h3>\n<p>閉じた TarFile オブジェクトを操作しようとすると、<code class=\"language-text\">OSError</code>が発生します。</p>\n<h4 id=\"対策-1\" style=\"position:relative;\"><a href=\"#%E5%AF%BE%E7%AD%96-1\" aria-label=\"対策 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>対策</h4>\n<p><code class=\"language-text\">with</code>文を使用して、自動的にリソースを解放するようにします。</p>\n<h2 id=\"6-実用例\" style=\"position:relative;\"><a href=\"#6-%E5%AE%9F%E7%94%A8%E4%BE%8B\" aria-label=\"6 実用例 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 実用例</h2>\n<h3 id=\"61-大量のファイルをアーカイブして圧縮\" style=\"position:relative;\"><a href=\"#61-%E5%A4%A7%E9%87%8F%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%81%97%E3%81%A6%E5%9C%A7%E7%B8%AE\" aria-label=\"61 大量のファイルをアーカイブして圧縮 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.1 大量のファイルをアーカイブして圧縮</h3>\n<p>大量のログファイルなどをアーカイブして gzip 形式で圧縮する例です。</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> tarfile\n<span class=\"token keyword\">import</span> os\n\n<span class=\"token comment\"># 複数のログファイルをアーカイブ</span>\n<span class=\"token keyword\">with</span> tarfile<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'logs_archive.tar.gz'</span><span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span><span class=\"token string\">'w:gz'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> tar<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> log_file <span class=\"token keyword\">in</span> os<span class=\"token punctuation\">.</span>listdir<span class=\"token punctuation\">(</span><span class=\"token string\">'logs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        tar<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token string\">'logs'</span><span class=\"token punctuation\">,</span> log_file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"62-展開先ディレクトリに特定の条件を適用\" style=\"position:relative;\"><a href=\"#62-%E5%B1%95%E9%96%8B%E5%85%88%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%81%AB%E7%89%B9%E5%AE%9A%E3%81%AE%E6%9D%A1%E4%BB%B6%E3%82%92%E9%81%A9%E7%94%A8\" aria-label=\"62 展開先ディレクトリに特定の条件を適用 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.2 展開先ディレクトリに特定の条件を適用</h3>\n<p>アーカイブ内のファイルを展開し、特定のファイルのみ処理する例です。</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">with</span> tarfile<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'example.tar.gz'</span><span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span><span class=\"token string\">'r:gz'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> tar<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> member <span class=\"token keyword\">in</span> tar<span class=\"token punctuation\">.</span>getmembers<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> member<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span>endswith<span class=\"token punctuation\">(</span><span class=\"token string\">'.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            tar<span class=\"token punctuation\">.</span>extract<span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">,</span> path<span class=\"token operator\">=</span><span class=\"token string\">'output_dir'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"7-結論\" style=\"position:relative;\"><a href=\"#7-%E7%B5%90%E8%AB%96\" aria-label=\"7 結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. 結論</h2>\n<p><code class=\"language-text\">tarfile</code>モジュールを使用すると、Python コード内で tar 形式のアーカイブを簡単かつ効率的に操作できます。特に gzip や bz2 形式との互換性を持つ点が強力で、ログファイルのバックアップやデータ転送など、さまざまな用途に役立ちます。この記事を参考に、<code class=\"language-text\">tarfile</code>モジュールを活用してみてください。</p>","frontmatter":{"title":"Pythonでtarファイルを扱う - tarfile","date":"2025-02-09","description":"Pythonの標準ライブラリであるtarfileモジュールを使用して、tarファイルの作成、展開、操作方法を詳しく解説します。gzipやbz2形式の圧縮アーカイブの扱い方や便利なユースケースについても網羅しています。","tags":["Python","tarfile","データ圧縮"],"featuredImage":{"publicURL":"/static/a6ed511df57f8ed48c4fb002fa158690/archive-files.jpg","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#281808","images":{"fallback":{"src":"/static/a6ed511df57f8ed48c4fb002fa158690/3c367/archive-files.jpg","srcSet":"/static/a6ed511df57f8ed48c4fb002fa158690/19e71/archive-files.jpg 128w,\n/static/a6ed511df57f8ed48c4fb002fa158690/68974/archive-files.jpg 256w,\n/static/a6ed511df57f8ed48c4fb002fa158690/3c367/archive-files.jpg 512w","sizes":"(min-width: 512px) 512px, 100vw"},"sources":[{"srcSet":"/static/a6ed511df57f8ed48c4fb002fa158690/6766a/archive-files.webp 128w,\n/static/a6ed511df57f8ed48c4fb002fa158690/22bfc/archive-files.webp 256w,\n/static/a6ed511df57f8ed48c4fb002fa158690/d689f/archive-files.webp 512w","type":"image/webp","sizes":"(min-width: 512px) 512px, 100vw"}]},"width":512,"height":512}}}}},"relatedPosts":{"nodes":[{"fields":{"slug":"/python-gzip/"},"frontmatter":{"title":"Pythonでgzipファイルを扱う - gzip","date":"2025-02-09","tags":["Python","gzip","データ圧縮"],"description":"Python標準ライブラリのgzipモジュールを使って、gzip形式のファイルやデータを効率的に圧縮・展開する方法を徹底解説。基本的な使い方からエラー対処法、応用例まで幅広くカバーします。","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#281808","images":{"fallback":{"src":"/static/a6ed511df57f8ed48c4fb002fa158690/3c367/archive-files.jpg","srcSet":"/static/a6ed511df57f8ed48c4fb002fa158690/19e71/archive-files.jpg 128w,\n/static/a6ed511df57f8ed48c4fb002fa158690/68974/archive-files.jpg 256w,\n/static/a6ed511df57f8ed48c4fb002fa158690/3c367/archive-files.jpg 512w","sizes":"(min-width: 512px) 512px, 100vw"},"sources":[{"srcSet":"/static/a6ed511df57f8ed48c4fb002fa158690/6766a/archive-files.webp 128w,\n/static/a6ed511df57f8ed48c4fb002fa158690/22bfc/archive-files.webp 256w,\n/static/a6ed511df57f8ed48c4fb002fa158690/d689f/archive-files.webp 512w","type":"image/webp","sizes":"(min-width: 512px) 512px, 100vw"}]},"width":512,"height":512}}}}},{"fields":{"slug":"/python-zipfile/"},"frontmatter":{"title":"PythonでZIPファイルを操作する - zipfile","date":"2025-02-09","tags":["Python","zipfile","データ圧縮"],"description":"Pythonの標準ライブラリであるzipfileモジュールを使用して、ZIPファイルの作成、展開、操作方法を詳しく解説します。圧縮ファイルの扱い方や、便利なユースケースについても網羅しています。","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#281808","images":{"fallback":{"src":"/static/a6ed511df57f8ed48c4fb002fa158690/3c367/archive-files.jpg","srcSet":"/static/a6ed511df57f8ed48c4fb002fa158690/19e71/archive-files.jpg 128w,\n/static/a6ed511df57f8ed48c4fb002fa158690/68974/archive-files.jpg 256w,\n/static/a6ed511df57f8ed48c4fb002fa158690/3c367/archive-files.jpg 512w","sizes":"(min-width: 512px) 512px, 100vw"},"sources":[{"srcSet":"/static/a6ed511df57f8ed48c4fb002fa158690/6766a/archive-files.webp 128w,\n/static/a6ed511df57f8ed48c4fb002fa158690/22bfc/archive-files.webp 256w,\n/static/a6ed511df57f8ed48c4fb002fa158690/d689f/archive-files.webp 512w","type":"image/webp","sizes":"(min-width: 512px) 512px, 100vw"}]},"width":512,"height":512}}}}}]},"previous":{"fields":{"slug":"/python-secrets/"},"frontmatter":{"title":"Pythonでセキュアな乱数を生成する - secrets"}},"next":{"fields":{"slug":"/python-zipfile/"},"frontmatter":{"title":"PythonでZIPファイルを操作する - zipfile"}}},"pageContext":{"id":"ac3b01ab-695e-5f73-9f26-ade670037d19","previousPostId":"56f85b2b-0352-5e94-baf1-00ffc8c15742","nextPostId":"6a944458-2521-50f6-b4f2-0ebd2383e164","relatedPosts":["/python-zipfile/","/python-gzip/"]}},"staticQueryHashes":["2841359383"],"slicesMap":{}}