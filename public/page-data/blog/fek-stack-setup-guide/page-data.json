{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/fek-stack-setup-guide/","result":{"data":{"site":{"siteMetadata":{"title":"Developer's blog"}},"markdownRemark":{"id":"b55b743d-2f31-5b03-b8dc-708859ccad1b","excerpt":"FEK スタック構築手順 1. 概要 FEK スタック（Fluentd, Elasticsearch, Kibana）は、システムやアプリケーションのログを収集、保存、そして可視化するための強力なツールセットです。この手順書では、FEK…","tableOfContents":"<ul>\n<li>\n<p><a href=\"#fek-%E3%82%B9%E3%82%BF%E3%83%83%E3%82%AF%E6%A7%8B%E7%AF%89%E6%89%8B%E9%A0%86\">FEK スタック構築手順</a></p>\n<ul>\n<li>\n<p><a href=\"#1-%E6%A6%82%E8%A6%81\">1. 概要</a></p>\n</li>\n<li>\n<p><a href=\"#2-%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6\">2. 前提条件</a></p>\n<ul>\n<li><a href=\"#21-%E5%AF%BE%E5%BF%9C-os\">2.1 対応 OS</a></li>\n<li><a href=\"#22-%E6%A8%A9%E9%99%90\">2.2 権限</a></li>\n<li><a href=\"#23-%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E8%A8%AD%E5%AE%9A\">2.3 ネットワーク設定</a></li>\n<li><a href=\"#24-%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3\">2.4 ソフトウェアバージョン</a></li>\n<li><a href=\"#25-%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99\">2.5 事前準備</a></li>\n<li><a href=\"#26-%E3%81%9D%E3%81%AE%E4%BB%96\">2.6 その他</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E8%A8%AD%E5%AE%9A\">3. システム設定</a></p>\n<ul>\n<li><a href=\"#31-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%87%E3%82%A3%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%82%BF%E3%81%AE%E5%88%B6%E9%99%90%E7%B7%A9%E5%92%8C\">3.1 ファイルディスクリプタの制限緩和</a></li>\n<li><a href=\"#32-%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%AB%E3%83%BC%E3%83%8D%E3%83%AB%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%81%AE%E6%9C%80%E9%81%A9%E5%8C%96\">3.2 ネットワークカーネルパラメータの最適化</a></li>\n<li><a href=\"#33-%E6%99%82%E5%88%BB%E5%90%8C%E6%9C%9F%E8%A8%AD%E5%AE%9A\">3.3 時刻同期設定</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#4-%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\">4. ソフトウェアのインストール</a></p>\n<ul>\n<li><a href=\"#41-fluentd-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\">4.1 Fluentd のインストール</a></li>\n<li><a href=\"#42-elasticsearch-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\">4.2 Elasticsearch のインストール</a></li>\n<li><a href=\"#43-kibana-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\">4.3 Kibana のインストール</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#5-fluentd-%E3%81%AE%E8%A8%AD%E5%AE%9A\">5. Fluentd の設定</a></p>\n<ul>\n<li><a href=\"#51-%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E3%83%90%E3%83%83%E3%82%AF%E3%82%A2%E3%83%83%E3%83%97\">5.1 設定ファイルのバックアップ</a></li>\n<li><a href=\"#52-fluentd-%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E7%B7%A8%E9%9B%86\">5.2 Fluentd の設定ファイルを編集</a></li>\n<li><a href=\"#53-td-agent-%E3%81%AE%E5%86%8D%E8%B5%B7%E5%8B%95\">5.3 td-agent の再起動</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#6-elasticsearch-%E3%81%AE%E8%A8%AD%E5%AE%9A\">6. Elasticsearch の設定</a></p>\n<ul>\n<li><a href=\"#61-%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3%E8%A8%AD%E5%AE%9A%E3%81%AE%E7%84%A1%E5%8A%B9%E5%8C%96\">6.1 セキュリティ設定の無効化</a></li>\n<li><a href=\"#62-elasticsearch-%E3%81%AE%E5%86%8D%E8%B5%B7%E5%8B%95\">6.2 Elasticsearch の再起動</a></li>\n<li><a href=\"#63-elasticsearch-%E3%81%AE%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E7%A2%BA%E8%AA%8D\">6.3 Elasticsearch のステータス確認</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#7-kibana-%E3%81%AE%E8%A8%AD%E5%AE%9A\">7. Kibana の設定</a></p>\n<ul>\n<li><a href=\"#71-kibana-%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E7%B7%A8%E9%9B%86\">7.1 Kibana の設定ファイルを編集</a></li>\n<li><a href=\"#72-kibana-%E3%81%AE%E5%86%8D%E8%B5%B7%E5%8B%95\">7.2 Kibana の再起動</a></li>\n<li><a href=\"#73-kibana-%E3%81%AE%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E7%A2%BA%E8%AA%8D\">7.3 Kibana のステータス確認</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#8-kibana-%E3%81%AE%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%A8%E5%88%9D%E6%9C%9F%E8%A8%AD%E5%AE%9A\">8. Kibana のログインと初期設定</a></p>\n<ul>\n<li><a href=\"#81-kibana-%E3%81%B8%E3%81%AE%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3\">8.1 Kibana へのログイン</a></li>\n<li><a href=\"#82-%E5%88%9D%E6%9C%9F%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AE%E8%A8%AD%E5%AE%9A\">8.2 初期ユーザーとパスワードの設定</a></li>\n<li><a href=\"#83-kibana-%E3%81%AE%E5%88%9D%E6%9C%9F%E8%A8%AD%E5%AE%9A\">8.3 Kibana の初期設定</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#9-%E3%83%AD%E3%82%B0%E3%81%AE%E4%BF%9D%E7%AE%A1%E3%81%8A%E3%82%88%E3%81%B3%E8%BB%A2%E9%80%81%E8%A8%AD%E5%AE%9A\">9. ログの保管および転送設定</a></p>\n<ul>\n<li>\n<p><a href=\"#91-%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%81%AE%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB%E3%83%9D%E3%83%AA%E3%82%B7%E3%83%BC%E8%A8%AD%E5%AE%9A\">9.1 インデックスのライフサイクルポリシー設定</a></p>\n</li>\n<li>\n<p><a href=\"#92-oci-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8%E3%81%B8%E3%81%AE%E3%83%AD%E3%82%B0%E8%BB%A2%E9%80%81%E8%A8%AD%E5%AE%9A\">9.2 OCI オブジェクトストレージへのログ転送設定</a></p>\n<ul>\n<li><a href=\"#921-oci-%E3%81%AE%E8%A8%AD%E5%AE%9A\">9.2.1 OCI の設定</a></li>\n<li><a href=\"#922-fluentd-%E3%81%AE%E8%A8%AD%E5%AE%9A\">9.2.2 Fluentd の設定</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#93-oci-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB%E3%83%9D%E3%83%AA%E3%82%B7%E3%83%BC%E8%A8%AD%E5%AE%9A\">9.3 OCI オブジェクトストレージにおけるライフサイクルポリシー設定</a></p>\n<ul>\n<li><a href=\"#931-iam-%E3%83%9D%E3%83%AA%E3%82%B7%E3%83%BC%E3%81%AE%E8%A8%AD%E5%AE%9A\">9.3.1 IAM ポリシーの設定</a></li>\n<li><a href=\"#932-%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB%E3%83%9D%E3%83%AA%E3%82%B7%E3%83%BC%E3%81%AE%E8%A8%AD%E5%AE%9A\">9.3.2 ライフサイクルポリシーの設定</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#10-kibana-%E3%81%A7%E3%81%AE%E3%83%AD%E3%82%B0%E5%8F%AF%E8%A6%96%E5%8C%96%E3%81%A8%E3%82%A2%E3%83%A9%E3%83%BC%E3%83%88%E7%99%BA%E7%A0%B2\">10. Kibana でのログ可視化とアラート発砲</a></p>\n<ul>\n<li><a href=\"#101-%E3%83%87%E3%83%BC%E3%82%BF%E3%83%93%E3%83%A5%E3%83%BC%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AE%E4%BD%9C%E6%88%90\">10.1 データビュー（インデックスパターン）の作成</a></li>\n<li><a href=\"#102-discover-%E3%81%A7%E3%83%AD%E3%82%B0%E3%81%AE%E6%A4%9C%E7%B4%A2%E3%81%A8%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0\">10.2 Discover でログの検索とフィルタリング</a></li>\n<li><a href=\"#103-%E3%83%80%E3%83%83%E3%82%B7%E3%83%A5%E3%83%9C%E3%83%BC%E3%83%89%E3%81%AE%E4%BD%9C%E6%88%90\">10.3 ダッシュボードの作成</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#11-%E3%82%A2%E3%83%A9%E3%83%BC%E3%83%88%E8%A8%AD%E5%AE%9A\">11. アラート設定</a></p>\n<ul>\n<li>\n<p><a href=\"#111-%E5%89%8D%E6%8F%90%E8%A8%AD%E5%AE%9A\">11.1 前提設定</a></p>\n<ul>\n<li><a href=\"#1111-kibana-%E3%81%AE%E8%A8%AD%E5%AE%9A%E5%A4%89%E6%9B%B4\">11.1.1 Kibana の設定変更</a></li>\n<li><a href=\"#1112-elasticsearch-%E3%81%AE%E8%A8%AD%E5%AE%9A%E5%A4%89%E6%9B%B4\">11.1.2 Elasticsearch の設定変更</a></li>\n<li><a href=\"#1113-td-agent-%E3%81%AE%E8%A8%AD%E5%AE%9A%E5%A4%89%E6%9B%B4\">11.1.3 td-agent の設定変更</a></li>\n<li><a href=\"#1114-fek-%E3%82%B9%E3%82%BF%E3%83%83%E3%82%AF%E3%81%AE%E5%86%8D%E8%B5%B7%E5%8B%95\">11.1.4 FEK スタックの再起動</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#112-%E3%82%A2%E3%83%A9%E3%83%BC%E3%83%88%E6%9D%A1%E4%BB%B6%E3%81%AE%E4%BD%9C%E6%88%90\">11.2 アラート条件の作成</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#12-nginx-%E3%81%AB%E3%82%88%E3%82%8B%E3%83%AA%E3%83%90%E3%83%BC%E3%82%B9%E3%83%97%E3%83%AD%E3%82%AD%E3%82%B7%E3%81%A8-ssltls-termination\">12. Nginx によるリバースプロキシと SSL/TLS Termination</a></p>\n<ul>\n<li><a href=\"#121-certbot-%E3%81%AB%E3%82%88%E3%82%8B-ssl-%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%81%AE%E5%8F%96%E5%BE%97\">12.1 Certbot による SSL 証明書の取得</a></li>\n<li><a href=\"#122-%E4%BB%A5%E5%89%8D%E3%81%AE%E8%A8%BC%E6%98%8E%E6%9B%B8%E8%A8%AD%E5%AE%9A%E3%81%AE%E5%89%8A%E9%99%A4\">12.2 以前の証明書設定の削除</a></li>\n<li><a href=\"#123-nginx-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%A8%E8%A8%AD%E5%AE%9A\">12.3 Nginx のインストールと設定</a></li>\n<li><a href=\"#124-kibana-%E3%81%AE%E8%A8%AD%E5%AE%9A%E5%A4%89%E6%9B%B4\">12.4 Kibana の設定変更</a></li>\n<li><a href=\"#125-nginx-%E3%81%AE%E3%83%9D%E3%83%BC%E3%83%88%E7%95%AA%E5%8F%B7%E5%A4%89%E6%9B%B4\">12.5 Nginx のポート番号変更</a></li>\n<li><a href=\"#126-%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%81%AE%E8%87%AA%E5%8B%95%E6%9B%B4%E6%96%B0%E8%A8%AD%E5%AE%9A\">12.6 証明書の自動更新設定</a></li>\n<li><a href=\"#127-kibana-%E3%81%A8-nginx-%E3%81%AE%E5%86%8D%E8%B5%B7%E5%8B%95\">12.7 Kibana と Nginx の再起動</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#13-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8%E3%81%B8%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E3%81%95%E3%82%8C%E3%81%9F%E3%83%AD%E3%82%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%8F%AF%E8%A6%96%E5%8C%96\">13. オブジェクト・ストレージへアップロードされたログファイルの可視化</a></p>\n<ul>\n<li><a href=\"#131-%E3%83%AD%E3%82%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89\">13.1 ログファイルのダウンロード</a></li>\n<li><a href=\"#132-%E3%83%AD%E3%82%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%B1%95%E9%96%8B\">13.2 ログファイルの展開</a></li>\n<li><a href=\"#133-kibana-%E3%81%A7%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E5%8F%AF%E8%A6%96%E5%8C%96\">13.3 Kibana でのデータ可視化</a></li>\n<li><a href=\"#134-%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%81%AE%E5%89%8A%E9%99%A4\">13.4 インデックスの削除</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","html":"<h1 id=\"fek-スタック構築手順\" style=\"position:relative;\"><a href=\"#fek-%E3%82%B9%E3%82%BF%E3%83%83%E3%82%AF%E6%A7%8B%E7%AF%89%E6%89%8B%E9%A0%86\" aria-label=\"fek スタック構築手順 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FEK スタック構築手順</h1>\n<h2 id=\"1-概要\" style=\"position:relative;\"><a href=\"#1-%E6%A6%82%E8%A6%81\" aria-label=\"1 概要 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 概要</h2>\n<p>FEK スタック（Fluentd, Elasticsearch, Kibana）は、システムやアプリケーションのログを収集、保存、そして可視化するための強力なツールセットです。この手順書では、FEK スタックを効率的にインストールし、設定するための手順を詳細に説明します。</p>\n<p>Fluentd は多様なデータソースからのログ収集を担当し、Elasticsearch はそのログを構造化して保存します。最後に、Kibana を使用してログデータを視覚的に分析し、必要な情報を迅速に抽出できるダッシュボードを構築します。</p>\n<p>本手順書では、システム設定からソフトウェアのインストール、設定、さらには OCI オブジェクトストレージへのログの転送および管理まで、全体の流れを網羅しています。</p>\n<h2 id=\"2-前提条件\" style=\"position:relative;\"><a href=\"#2-%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6\" aria-label=\"2 前提条件 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 前提条件</h2>\n<p>FEK スタックの構築にあたり、以下の前提条件を満たしている必要があります。</p>\n<h3 id=\"21-対応-os\" style=\"position:relative;\"><a href=\"#21-%E5%AF%BE%E5%BF%9C-os\" aria-label=\"21 対応 os permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1 対応 OS</h3>\n<ul>\n<li>CentOS, RHEL などの RedHat 系 Linux ディストリビューション</li>\n</ul>\n<h3 id=\"22-権限\" style=\"position:relative;\"><a href=\"#22-%E6%A8%A9%E9%99%90\" aria-label=\"22 権限 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.2 権限</h3>\n<ul>\n<li>root 権限またはそれに準じる管理者権限が必要です。</li>\n</ul>\n<h3 id=\"23-ネットワーク設定\" style=\"position:relative;\"><a href=\"#23-%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E8%A8%AD%E5%AE%9A\" aria-label=\"23 ネットワーク設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.3 ネットワーク設定</h3>\n<ul>\n<li>インターネットアクセスが可能であること（必要なパッケージのインストールやリポジトリの追加にインターネット接続が必要）。</li>\n</ul>\n<h3 id=\"24-ソフトウェアバージョン\" style=\"position:relative;\"><a href=\"#24-%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3\" aria-label=\"24 ソフトウェアバージョン permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.4 ソフトウェアバージョン</h3>\n<ul>\n<li>Elasticsearch: 8.x 系</li>\n<li>Fluentd: td-agent 3.x 系</li>\n<li>Kibana: 8.x 系</li>\n</ul>\n<h3 id=\"25-事前準備\" style=\"position:relative;\"><a href=\"#25-%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99\" aria-label=\"25 事前準備 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.5 事前準備</h3>\n<ul>\n<li>ファイアウォールやセキュリティグループで必要なポートが開放されていること（例: Elasticsearch の 9200 ポート、Kibana の 5601 ポート）。</li>\n<li>サーバーの時刻が正確であること（時刻同期設定が必要）。</li>\n</ul>\n<h3 id=\"26-その他\" style=\"position:relative;\"><a href=\"#26-%E3%81%9D%E3%81%AE%E4%BB%96\" aria-label=\"26 その他 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.6 その他</h3>\n<ul>\n<li>本手順書に従う前に、システムのバックアップを取得しておくことを推奨します。</li>\n</ul>\n<h2 id=\"3-システム設定\" style=\"position:relative;\"><a href=\"#3-%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E8%A8%AD%E5%AE%9A\" aria-label=\"3 システム設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. システム設定</h2>\n<p>FEK スタックを構築する前に必要なシステム設定について説明します。これらの設定により、Fluentd、Elasticsearch、Kibana が適切に動作するための基盤を整えます。</p>\n<h3 id=\"31-ファイルディスクリプタの制限緩和\" style=\"position:relative;\"><a href=\"#31-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%87%E3%82%A3%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%82%BF%E3%81%AE%E5%88%B6%E9%99%90%E7%B7%A9%E5%92%8C\" aria-label=\"31 ファイルディスクリプタの制限緩和 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1 ファイルディスクリプタの制限緩和</h3>\n<p>Fluentd は多くのファイルやネットワーク接続を扱うため、システムが同時に開くことができるファイルディスクリプタの上限を適切に設定する必要があります。</p>\n<ol>\n<li><code class=\"language-text\">/etc/security/limits.conf</code>ファイルに以下の設定を追加します。</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /etc/security/limits.conf\n\nroot soft nofile <span class=\"token number\">65536</span>\nroot hard nofile <span class=\"token number\">65536</span>\n* soft nofile <span class=\"token number\">65536</span>\n* hard nofile <span class=\"token number\">65536</span></code></pre></div>\n<ol start=\"2\">\n<li>設定を反映させるためにマシンを再起動します。</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl <span class=\"token function\">reboot</span></code></pre></div>\n<ol start=\"3\">\n<li>再起動後、<code class=\"language-text\">ulimit -n</code>コマンドで設定が反映されていることを確認する。</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">ulimit</span> <span class=\"token parameter variable\">-n</span>\n<span class=\"token number\">65536</span></code></pre></div>\n<h3 id=\"32-ネットワークカーネルパラメータの最適化\" style=\"position:relative;\"><a href=\"#32-%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%AB%E3%83%BC%E3%83%8D%E3%83%AB%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%81%AE%E6%9C%80%E9%81%A9%E5%8C%96\" aria-label=\"32 ネットワークカーネルパラメータの最適化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.2 ネットワークカーネルパラメータの最適化</h3>\n<p>高負荷環境での安定動作を確保するため、ネットワークカーネルパラメータを最適化します。</p>\n<ol>\n<li><code class=\"language-text\">/etc/sysctl.conf</code>ファイルに以下の設定を追加する。</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">net.core.somaxconn <span class=\"token operator\">=</span> <span class=\"token number\">1024</span>\nnet.core.netdev_max_backlog <span class=\"token operator\">=</span> <span class=\"token number\">5000</span>\nnet.core.rmem_max <span class=\"token operator\">=</span> <span class=\"token number\">16777216</span>\nnet.core.wmem_max <span class=\"token operator\">=</span> <span class=\"token number\">16777216</span>\nnet.ipv4.tcp_wmem <span class=\"token operator\">=</span> <span class=\"token number\">4096</span> <span class=\"token number\">12582912</span> <span class=\"token number\">16777216</span>\nnet.ipv4.tcp_rmem <span class=\"token operator\">=</span> <span class=\"token number\">4096</span> <span class=\"token number\">12582912</span> <span class=\"token number\">16777216</span>\nnet.ipv4.tcp_max_syn_backlog <span class=\"token operator\">=</span> <span class=\"token number\">8096</span>\nnet.ipv4.tcp_slow_start_after_idle <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nnet.ipv4.tcp_tw_reuse <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\nnet.ipv4.ip_local_port_range <span class=\"token operator\">=</span> <span class=\"token number\">10240</span> <span class=\"token number\">65535</span>\nnet.ipv4.ip_local_reserved_ports <span class=\"token operator\">=</span> <span class=\"token number\">24224</span></code></pre></div>\n<ol start=\"2\">\n<li>設定を適用する。</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">sysctl</span> <span class=\"token parameter variable\">-p</span></code></pre></div>\n<h3 id=\"33-時刻同期設定\" style=\"position:relative;\"><a href=\"#33-%E6%99%82%E5%88%BB%E5%90%8C%E6%9C%9F%E8%A8%AD%E5%AE%9A\" aria-label=\"33 時刻同期設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.3 時刻同期設定</h3>\n<p>システムの時刻が正確であることは、ログ管理において非常に重要です。時刻同期を正しく設定します。</p>\n<ol>\n<li><code class=\"language-text\">systemd-timesyncd</code>をインストールします。</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> dnf <span class=\"token function\">install</span> systemd-timesyncd</code></pre></div>\n<ol start=\"2\">\n<li><code class=\"language-text\">/etc/systemd/timesyncd.conf</code>ファイルを編集し、NTP サーバーを設定します。</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /etc/systemd/timesyncd.conf\n\n<span class=\"token punctuation\">[</span>Time<span class=\"token punctuation\">]</span>\n<span class=\"token assign-left variable\">NTP</span><span class=\"token operator\">=</span>ntp.nict.jp</code></pre></div>\n<ol start=\"3\">\n<li>サービスを有効化し、即時起動します。</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> <span class=\"token parameter variable\">--now</span> systemd-timesyncd.service</code></pre></div>\n<h2 id=\"4-ソフトウェアのインストール\" style=\"position:relative;\"><a href=\"#4-%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\" aria-label=\"4 ソフトウェアのインストール permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. ソフトウェアのインストール</h2>\n<p>FEK スタック（Fluentd、Elasticsearch、Kibana）の各コンポーネントをインストールする手順について説明します。これにより、ログ収集、保存、可視化のための基本的な基盤を構築します。</p>\n<h3 id=\"41-fluentd-のインストール\" style=\"position:relative;\"><a href=\"#41-fluentd-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\" aria-label=\"41 fluentd のインストール permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1 Fluentd のインストール</h3>\n<ol>\n<li><code class=\"language-text\">EPEL</code>レポジトリのインストール</li>\n</ol>\n<p>EPEL (Extra Packages for Enterprise Linux) は、RedHat 系ディストリビューション向けの追加パッケージリポジトリです。Fluentd をインストールするために必要な依存パッケージを提供します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> dnf <span class=\"token function\">install</span> epel-release <span class=\"token parameter variable\">-y</span></code></pre></div>\n<ol start=\"2\">\n<li>td-agent のインストール</li>\n</ol>\n<p>td-agent は、Fluentd の公式バイナリパッケージで、RedHat 系システムで Fluentd を簡単にインストールできるようにしたものです。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-L</span> https://toolbelt.treasuredata.com/sh/install-redhat-td-agent4.sh <span class=\"token operator\">|</span> <span class=\"token function\">sh</span></code></pre></div>\n<ol start=\"3\">\n<li>サービス実行ユーザの変更</li>\n</ol>\n<p>こちらのステップは場合によっては不要ですが、ログの権限によっては特権ユーザでの Fluentd サービス実行が必須の場合があり、そのような場合には以下を設定します。</p>\n<p>td-agent のサービスファイルを編集します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /usr/lib/systemd/system/td-agent.service</code></pre></div>\n<p>ユーザーとグループの設定をコメントアウトします。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>Unit<span class=\"token punctuation\">]</span>\n<span class=\"token assign-left variable\">Description</span><span class=\"token operator\">=</span>td-agent: Fluentd based data collector <span class=\"token keyword\">for</span> Treasure Data\n<span class=\"token assign-left variable\">Documentation</span><span class=\"token operator\">=</span>https://docs.treasuredata.com/display/public/PD/About+Treasure+Data%%27s+Server-Side+Agent\n<span class=\"token assign-left variable\">After</span><span class=\"token operator\">=</span>network-online.target\n<span class=\"token assign-left variable\">Wants</span><span class=\"token operator\">=</span>network-online.target\n\n<span class=\"token punctuation\">[</span>Service<span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># User=td-agent</span>\n<span class=\"token comment\"># Group=td-agent</span>\n<span class=\"token assign-left variable\">LimitNOFILE</span><span class=\"token operator\">=</span><span class=\"token number\">65536</span>\n<span class=\"token assign-left variable\">Environment</span><span class=\"token operator\">=</span>LD_PRELOAD<span class=\"token operator\">=</span>/opt/td-agent/lib/libjemalloc.so\n<span class=\"token assign-left variable\">Environment</span><span class=\"token operator\">=</span>GEM_HOME<span class=\"token operator\">=</span>/opt/td-agent/lib/ruby/gems/3.1.0/\n<span class=\"token assign-left variable\">Environment</span><span class=\"token operator\">=</span>GEM_PATH<span class=\"token operator\">=</span>/opt/td-agent/lib/ruby/gems/3.1.0/\n<span class=\"token assign-left variable\">Environment</span><span class=\"token operator\">=</span>FLUENT_CONF<span class=\"token operator\">=</span>/etc/td-agent/td-agent.conf\n<span class=\"token assign-left variable\">Environment</span><span class=\"token operator\">=</span>FLUENT_PLUGIN<span class=\"token operator\">=</span>/etc/td-agent/plugin\n<span class=\"token assign-left variable\">Environment</span><span class=\"token operator\">=</span>FLUENT_SOCKET<span class=\"token operator\">=</span>/var/run/td-agent/td-agent.sock\n<span class=\"token assign-left variable\">Environment</span><span class=\"token operator\">=</span>TD_AGENT_LOG_FILE<span class=\"token operator\">=</span>/var/log/td-agent/td-agent.log\n<span class=\"token assign-left variable\">EnvironmentFile</span><span class=\"token operator\">=</span>-/etc/sysconfig/td-agent\n<span class=\"token assign-left variable\">PIDFile</span><span class=\"token operator\">=</span>/var/run/td-agent/td-agent.pid\n<span class=\"token assign-left variable\">RuntimeDirectory</span><span class=\"token operator\">=</span>td-agent\n<span class=\"token assign-left variable\">Type</span><span class=\"token operator\">=</span>forking\n<span class=\"token comment\"># XXX: Fix fluentd executables path</span>\n<span class=\"token assign-left variable\">ExecStart</span><span class=\"token operator\">=</span>/opt/td-agent/bin/fluentd <span class=\"token parameter variable\">--log</span> <span class=\"token variable\">$TD_AGENT_LOG_FILE</span> <span class=\"token parameter variable\">--daemon</span> /var/run/td-agent/td-agent.pid <span class=\"token variable\">$TD_AGENT_OPTIONS</span>\n<span class=\"token assign-left variable\">ExecStop</span><span class=\"token operator\">=</span>/bin/kill <span class=\"token parameter variable\">-TERM</span> <span class=\"token variable\">${MAINPID}</span>\n<span class=\"token assign-left variable\">ExecReload</span><span class=\"token operator\">=</span>/bin/kill <span class=\"token parameter variable\">-HUP</span> <span class=\"token variable\">${MAINPID}</span>\n<span class=\"token assign-left variable\">Restart</span><span class=\"token operator\">=</span>always\n<span class=\"token assign-left variable\">TimeoutStopSec</span><span class=\"token operator\">=</span><span class=\"token number\">120</span>\n\n<span class=\"token punctuation\">[</span>Install<span class=\"token punctuation\">]</span>\n<span class=\"token assign-left variable\">WantedBy</span><span class=\"token operator\">=</span>multi-user.target</code></pre></div>\n<p>サービス設定ファイルを反映させます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl daemon-reload</code></pre></div>\n<ol start=\"4\">\n<li>td-agent の起動と有効化</li>\n</ol>\n<p>インストール後、td-agent サービスを起動し、システム起動時に自動的に開始されるように設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> <span class=\"token parameter variable\">--now</span> td-agent.service</code></pre></div>\n<h3 id=\"42-elasticsearch-のインストール\" style=\"position:relative;\"><a href=\"#42-elasticsearch-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\" aria-label=\"42 elasticsearch のインストール permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.2 Elasticsearch のインストール</h3>\n<ol>\n<li>Elasticsearch の GPG キーをインポート</li>\n</ol>\n<p>Elasticsearch のパッケージをインストールするために、まず GPG キーをインポートします。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">rpm</span> <span class=\"token parameter variable\">--import</span> https://artifacts.elastic.co/GPG-KEY-elasticsearch</code></pre></div>\n<ol start=\"2\">\n<li>Elasticsearch リポジトリの追加</li>\n</ol>\n<p>Elasticsearch のパッケージを取得するためのリポジトリを追加します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> /etc/yum.repos.d/elasticsearch.repo <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF\n[elasticsearch]\nname=Elasticsearch repository for 8.x packages\nbaseurl=https://artifacts.elastic.co/packages/8.x/yum\ngpgcheck=1\ngpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch\nenabled=1\nautorefresh=1\ntype=rpm-md\nEOF</span></code></pre></div>\n<ol start=\"3\">\n<li>Elasticsearch のインストール</li>\n</ol>\n<p>Elasticsearch をインストールします。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> dnf <span class=\"token function\">install</span> <span class=\"token parameter variable\">--enablerepo</span><span class=\"token operator\">=</span>elasticsearch elasticsearch <span class=\"token parameter variable\">-y</span></code></pre></div>\n<ol start=\"4\">\n<li>Elasticsearch の起動と有効化</li>\n</ol>\n<p>インストール後、Elasticsearch サービスを起動し、システム起動時に自動的に開始されるように設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> <span class=\"token parameter variable\">--now</span> elasticsearch.service</code></pre></div>\n<h3 id=\"43-kibana-のインストール\" style=\"position:relative;\"><a href=\"#43-kibana-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\" aria-label=\"43 kibana のインストール permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.3 Kibana のインストール</h3>\n<ol>\n<li>Kibana のインストール</li>\n</ol>\n<p>Kibana は Elasticsearch リポジトリから直接インストールできます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> dnf <span class=\"token function\">install</span> kibana <span class=\"token parameter variable\">-y</span></code></pre></div>\n<ol start=\"2\">\n<li>Kibana の起動と有効化</li>\n</ol>\n<p>インストール後、Kibana サービスを起動し、システム起動時に自動的に開始されるように設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> <span class=\"token parameter variable\">--now</span> kibana.service</code></pre></div>\n<h2 id=\"5-fluentd-の設定\" style=\"position:relative;\"><a href=\"#5-fluentd-%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-label=\"5 fluentd の設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Fluentd の設定</h2>\n<p>Fluentd を設定して、ログを収集し、Elasticsearch に送信する方法を説明します。Fluentd の設定ファイルを適切に構成することで、効率的なログ管理が可能になります。</p>\n<h3 id=\"51-設定ファイルのバックアップ\" style=\"position:relative;\"><a href=\"#51-%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E3%83%90%E3%83%83%E3%82%AF%E3%82%A2%E3%83%83%E3%83%97\" aria-label=\"51 設定ファイルのバックアップ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.1 設定ファイルのバックアップ</h3>\n<p>まず、Fluentd の設定ファイルを編集する前に、既存の設定ファイルをバックアップします。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> /etc/td-agent/td-agent.conf /etc/td-agent/td-agent.conf.bk</code></pre></div>\n<h3 id=\"52-fluentd-の設定ファイルを編集\" style=\"position:relative;\"><a href=\"#52-fluentd-%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E7%B7%A8%E9%9B%86\" aria-label=\"52 fluentd の設定ファイルを編集 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.2 Fluentd の設定ファイルを編集</h3>\n<p>以下の手順で、ログの収集と Elasticsearch への送信を設定します。</p>\n<ol>\n<li><code class=\"language-text\">/etc/td-agent/conf.d/</code>ディレクトリの作成とインクルード</li>\n</ol>\n<p>既存の設定ファイル（<code class=\"language-text\">/etc/td-agent/td-agent.conf</code>）を汚さず、また複数の設定ファイルで柔軟に構成できるよう、<code class=\"language-text\">/etc/td-agent/conf.d/</code>ディレクトリを作成し、その下に設定ファイルを追加します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> /etc/td-agent/conf.d/</code></pre></div>\n<p>設定ファイルをインクルードする設定を<code class=\"language-text\">/etc/td-agent/td-agent.conf</code>に追加します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /etc/td-agent/td-agent.conf\n\n<span class=\"token comment\"># Include config files in the conf.d directory</span>\n@include conf.d/*.conf</code></pre></div>\n<p><code class=\"language-text\">@include</code>ディレクトリについての参考：</p>\n<ul>\n<li><a href=\"https://docs.fluentd.org/configuration/config-file\">Config File Syntax | Fluentd</a></li>\n</ul>\n<p>今回は、ログファイル<code class=\"language-text\">/var/log/messages</code>の転送を行うため、これに対応する<code class=\"language-text\">/etc/td-agent/conf.d/messages.conf</code>としました。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /etc/td-agent/conf.d/messages.conf</code></pre></div>\n<p>以後このファイルに対して追記を行います。</p>\n<ol start=\"2\">\n<li>ログソースの定義</li>\n</ol>\n<p>収集するログのソースを定義します。以下の例では、<code class=\"language-text\">/var/log/messages</code>のログを収集対象としています。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;source>\n  @type tail\n  path /var/log/messages\n  pos_file /var/log/td-agent/messages.pos\n  tag messages\n  format none\n&lt;/source></code></pre></div>\n<ol start=\"3\">\n<li>レコードの変換</li>\n</ol>\n<p>収集したログにホスト名を付加するためのレコード変換フィルタを設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;filter **>\n  @type record_transformer\n  &lt;record>\n    hostname ${hostname}\n  &lt;/record>\n&lt;/filter></code></pre></div>\n<ol start=\"4\">\n<li>ログの転送先設定（Elasticsearh）</li>\n</ol>\n<p>収集したログを Elasticsearch に送信します。以下の設定例では、<code class=\"language-text\">messages</code>インデックスにログを送信します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;match messages>\n  @type elasticsearch\n  host localhost\n  port 9200\n  type_name log\n  include_tag_key true\n  logstash_prefix messages\n  logstash_format true\n&lt;/match></code></pre></div>\n<h3 id=\"53-td-agent-の再起動\" style=\"position:relative;\"><a href=\"#53-td-agent-%E3%81%AE%E5%86%8D%E8%B5%B7%E5%8B%95\" aria-label=\"53 td agent の再起動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.3 td-agent の再起動</h3>\n<p>設定ファイルの編集が完了したら、設定テストの後、td-agent を再起動して設定を反映させます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> td-agent --dry-run\n<span class=\"token function\">sudo</span> systemctl restart td-agent.service</code></pre></div>\n<h2 id=\"6-elasticsearch-の設定\" style=\"position:relative;\"><a href=\"#6-elasticsearch-%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-label=\"6 elasticsearch の設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. Elasticsearch の設定</h2>\n<p>Elasticsearch の基本的な設定を行い、Fluentd から送信されたログを受信・保存できるようにします。</p>\n<h3 id=\"61-セキュリティ設定の無効化\" style=\"position:relative;\"><a href=\"#61-%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3%E8%A8%AD%E5%AE%9A%E3%81%AE%E7%84%A1%E5%8A%B9%E5%8C%96\" aria-label=\"61 セキュリティ設定の無効化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.1 セキュリティ設定の無効化</h3>\n<p>開発環境やテスト環境では、Elasticsearch のセキュリティ機能を無効にして簡易的な設定で運用することが一般的です。以下の設定で TLS やセキュリティ関連の機能を無効化します。</p>\n<ol>\n<li>Elasticsearch の設定ファイル（<code class=\"language-text\">/etc/elasticsearch/elasticsearch.yml</code>）を編集します。</li>\n</ol>\n<p>以下の設定を追加または変更します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># Enable security features\nxpack.security.enabled: false\n\nxpack.security.enrollment.enabled: false\n\n# Enable encryption for HTTP API client connections, such as Kibana, Logstash, and Agents\nxpack.security.http.ssl:\n  enabled: false\n  keystore.path: certs/http.p12\n\n# Enable encryption and mutual authentication between cluster nodes\nxpack.security.transport.ssl:\n  enabled: false\n  verification_mode: certificate\n  keystore.path: certs/transport.p12\n  truststore.path: certs/transport.p12</code></pre></div>\n<h3 id=\"62-elasticsearch-の再起動\" style=\"position:relative;\"><a href=\"#62-elasticsearch-%E3%81%AE%E5%86%8D%E8%B5%B7%E5%8B%95\" aria-label=\"62 elasticsearch の再起動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.2 Elasticsearch の再起動</h3>\n<p>設定を反映させるために、Elasticsearch を再起動します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl restart elasticsearch.service</code></pre></div>\n<h3 id=\"63-elasticsearch-のステータス確認\" style=\"position:relative;\"><a href=\"#63-elasticsearch-%E3%81%AE%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E7%A2%BA%E8%AA%8D\" aria-label=\"63 elasticsearch のステータス確認 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.3 Elasticsearch のステータス確認</h3>\n<p>再起動後、Elasticsearch が正常に動作しているかを確認します。以下のコマンドを使用して、クラスタのヘルスステータスを確認できます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-X</span> GET <span class=\"token string\">\"localhost:9200/_cluster/health?pretty\"</span></code></pre></div>\n<p>出力例：</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"cluster_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"elasticsearch\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"status\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"green\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"timed_out\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"number_of_nodes\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"number_of_data_nodes\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"active_primary_shards\"</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"active_shards\"</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"relocating_shards\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"initializing_shards\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"unassigned_shards\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"delayed_unassigned_shards\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"number_of_pending_tasks\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"number_of_in_flight_fetch\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"task_max_waiting_in_queue_millis\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"active_shards_percent_as_number\"</span><span class=\"token operator\">:</span> <span class=\"token number\">100.0</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>この出力で<code class=\"language-text\">status</code>が<code class=\"language-text\">green</code>であれば、Elasticsearch は正常に動作しています。</p>\n<h2 id=\"7-kibana-の設定\" style=\"position:relative;\"><a href=\"#7-kibana-%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-label=\"7 kibana の設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. Kibana の設定</h2>\n<p>Kibana の基本的な設定を行い、Elasticsearch に接続してデータを可視化する準備を整えます。Kibana は Elasticsearch のデータを視覚的に分析するためのツールであり、その設定を適切に行うことで、効率的なデータ探索が可能になります。</p>\n<h3 id=\"71-kibana-の設定ファイルを編集\" style=\"position:relative;\"><a href=\"#71-kibana-%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E7%B7%A8%E9%9B%86\" aria-label=\"71 kibana の設定ファイルを編集 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.1 Kibana の設定ファイルを編集</h3>\n<p>Kibana を Elasticsearch に接続するために、設定ファイル（<code class=\"language-text\">/etc/kibana/kibana.yml</code>）を編集します。</p>\n<p>Kibana がリッスンするポートとホスト、Elasticsearch への接続設定を行います。以下の設定を追加または変更します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">server.port: 5601\nserver.host: \"0.0.0.0\"  # Kibanaを外部からアクセス可能にする場合は \"0.0.0.0\" を使用\nelasticsearch.hosts: [\"http://localhost:9200\"]  # Elasticsearchがローカルホスト上で動作している場合</code></pre></div>\n<h3 id=\"72-kibana-の再起動\" style=\"position:relative;\"><a href=\"#72-kibana-%E3%81%AE%E5%86%8D%E8%B5%B7%E5%8B%95\" aria-label=\"72 kibana の再起動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.2 Kibana の再起動</h3>\n<p>設定ファイルを保存した後、Kibana サービスを再起動して設定を反映させます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl restart kibana.service</code></pre></div>\n<h3 id=\"73-kibana-のステータス確認\" style=\"position:relative;\"><a href=\"#73-kibana-%E3%81%AE%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E7%A2%BA%E8%AA%8D\" aria-label=\"73 kibana のステータス確認 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.3 Kibana のステータス確認</h3>\n<p>Kibana が正常に起動しているかを確認します。以下のコマンドを使用して、Kibana サービスのステータスを確認できます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl status kibana.service</code></pre></div>\n<h2 id=\"8-kibana-のログインと初期設定\" style=\"position:relative;\"><a href=\"#8-kibana-%E3%81%AE%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%A8%E5%88%9D%E6%9C%9F%E8%A8%AD%E5%AE%9A\" aria-label=\"8 kibana のログインと初期設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. Kibana のログインと初期設定</h2>\n<p>Kibana にログインし、基本的な初期設定を行う手順を説明します。これにより、Elasticsearch に保存されたデータを Kibana で可視化し、分析できるようになります。</p>\n<h3 id=\"81-kibana-へのログイン\" style=\"position:relative;\"><a href=\"#81-kibana-%E3%81%B8%E3%81%AE%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3\" aria-label=\"81 kibana へのログイン permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8.1 Kibana へのログイン</h3>\n<ol>\n<li>ブラウザで Kibana にアクセス</li>\n</ol>\n<p>Kibana はウェブベースのインターフェースを提供します。以下の URL をブラウザで開きます：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">http://&lt;KibanaサーバーのIP>:5601</code></pre></div>\n<ol start=\"2\">\n<li>初回ログイン</li>\n</ol>\n<p>Kibana の初回ログイン時に、Elasticsearch の Enrollment Token（登録トークン）を求められる場合があります。これは Elasticsearch のノード上で生成できます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7485b1c52a68843c8aaae7fb169dda2a/ea64c/configure_elastic_to_get_started.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.65822784810127%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABMElEQVR42pWTy07DMBBF+//fwRJ2fAJigZC6YAMqIk1fPCpok9jx25cZR0FRElLFylGsiXM9nrleWBcwhfNMxKV1LYuxoLGecDQHhDwR32nOMf42KaiNHyzylFWIEaDnRwocRQEePkSEgMuC/eD+8IHnl1es8w1Wqwy73QFv2YbIkW/3k1mOHrlWGmUpUIkaRefNlJWcW0MPUTtI5eh48Y9UgUSEmyuolIGsNbQxMAmL7uA1swQ5k/7gECWamjVPkApeSYuSUGwfF4mQOtxKOz8zw+RFbo525EGbNllmAld3X7h5OOJMMe+bjbr/smMGgtqQoa2FIxR1W0gFS3V8Whe4vn/H7eMnzsIMBJXmRtqhIHuMRZn2ZjBsdj5ujGFQQ2UasVHB/zBps4Z+vBVjwV9kL/nSebi+JwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"configure_elastic_to_get_started.png\"\n        title=\"\"\n        src=\"/static/7485b1c52a68843c8aaae7fb169dda2a/f058b/configure_elastic_to_get_started.png\"\n        srcset=\"/static/7485b1c52a68843c8aaae7fb169dda2a/c26ae/configure_elastic_to_get_started.png 158w,\n/static/7485b1c52a68843c8aaae7fb169dda2a/6bdcf/configure_elastic_to_get_started.png 315w,\n/static/7485b1c52a68843c8aaae7fb169dda2a/f058b/configure_elastic_to_get_started.png 630w,\n/static/7485b1c52a68843c8aaae7fb169dda2a/40601/configure_elastic_to_get_started.png 945w,\n/static/7485b1c52a68843c8aaae7fb169dda2a/ea64c/configure_elastic_to_get_started.png 1116w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Enrollment Token を取得するには、Elasticsearch ノードで以下のコマンドを実行します：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token <span class=\"token parameter variable\">-s</span> kibana</code></pre></div>\n<p>生成されたトークンをコピーし、Kibana の画面に貼り付けて登録します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 549px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/33c0e9bfb587bfe093fc2ddabdcfad8c/928ea/paste_token.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 112.0253164556962%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACwklEQVR42qVU227TQBDNhwLiB/iZqoI31L8AHnkAhBBt0jRtLk0dO7aTNInvt/Xu+jC7ThPnIhGEpeMZ786cnZu3VXKJv4ERirLCObatc4yk4ICMwf+XkJUCqICha+Nb5yMqCYpWnE+oCBjjtdyAFyXMKMHNcgGWFygO9l/sjwi5kKgoGrlBU5f0kqJho76bdnJX35ZiJzt4no92p4vrmza+//iJ3kMf1+0Orn+38YvQubvH49hAl+Rt9w6dbg+d2zvckM19f0hNE7sIFWEUJ+gPRjAMC+32LQajMQzTwohkf/CI8dMEtjNDr/egiZ+MCUaPT1o3LVtPwsmUBYVfNVKttulXu1QPU66q4xoKsQMXdcHLZvG33/zE2ktThKohEZCSFQJhUiLJBIHrk//lqchBTUCrZuea0AsyrIMUXpTTZqkP4rTHSGf6m2/BSlorGEVYUlZClyGnEdOEypGVDPP5DK7rYOY4sG0bjmOTdGBNpzAJU1qfTm2Ypkl7ZENrhmHApwlRCe0RqpMcInFnM8wXCywWcziuSwRTLR3H1XuKZLo9zMbEnCBNU12i/QgZ084qohk5mpZJ0bra2bIsTCYTTawOWy6XWDw/kz7XtnGS7BOWm1r5vkfhb7BeI4pChIGv5Wq9QhLHmwZI3YQatS6lbBKqpnB4cYkg5VhHjHSGVVhoLIMcUS4RZVLvezEhaYD8VFB7Xc6pYyFdAlGcYrn2qeMh1l4Az1fR+QeDfzxTe11Ww3r4cFHpgdW3CxNkzPUo5TS3V1/nuPjk4OKzg8svNVaUlSrbEeHL4ake9IIiTeGHOYK4QEDzGVLK767GeH05wJv3Q7z9MMQr0s1lri9i/etldM/lxT4K6jrTKDey1gtWIEpyeGEGP8roJ8josLz2KTaEKveYjI6RnUCOhJCmOyQbqGwbt011NsoT0Otc4g8ppJ2cfrdVOwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"paste_token.png\"\n        title=\"\"\n        src=\"/static/33c0e9bfb587bfe093fc2ddabdcfad8c/928ea/paste_token.png\"\n        srcset=\"/static/33c0e9bfb587bfe093fc2ddabdcfad8c/c26ae/paste_token.png 158w,\n/static/33c0e9bfb587bfe093fc2ddabdcfad8c/6bdcf/paste_token.png 315w,\n/static/33c0e9bfb587bfe093fc2ddabdcfad8c/928ea/paste_token.png 549w\"\n        sizes=\"(max-width: 549px) 100vw, 549px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol start=\"3\">\n<li>検証コードの確認</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 567px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b96b8586a02d484e8b238dcd0a1b6d7b/8710b/verification_required.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.92405063291139%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABdElEQVR42q1SyU7DMBDNL3LkDzjBR/TMqVcO8AFw5weANmkrJBDqEuhCl6zN2tixk4dt2opCCxUw0pPHmvGb55nR8I+W5zm0bYGyLBWKolD3IIxACN2ISWwz7aeqRVGi3TYRRvGa8DtbE67SGGOwLBvT6QyzmQXX9TB6ncDzfPjzuTg9OK6LUKiW3J/Vah+/KW2xyFCvG2g2W6jVdOh6A63WPTqdLgyjgZvbO9R1Az3T3K1QqgrDGHGcIElTZIQIUHWm6UIgQ5YR1UdKcwGKKCKwrQiTcaD8DULZJ/lYTsn3Y/T7NgZ9R2E0dPFsWhgOPbheoFpg2y4cJ0CSEMRRBkLZ7qFwXoASpiATc/ruU8pVjDEuCjPh8/2mLFdFJnOhmgmCLOdgws9lIelL0iW2TfwLYSaURGmu2iCxuZ9QhVYo91Eok/iS6GGU4uisi8rVACcXJqrX4zXxj3u48e3li+ZLjIPTRxyf93BYfULlcvA7wr/YG1Oq8xsobCwXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"verification_required.png\"\n        title=\"\"\n        src=\"/static/b96b8586a02d484e8b238dcd0a1b6d7b/8710b/verification_required.png\"\n        srcset=\"/static/b96b8586a02d484e8b238dcd0a1b6d7b/c26ae/verification_required.png 158w,\n/static/b96b8586a02d484e8b238dcd0a1b6d7b/6bdcf/verification_required.png 315w,\n/static/b96b8586a02d484e8b238dcd0a1b6d7b/8710b/verification_required.png 567w\"\n        sizes=\"(max-width: 567px) 100vw, 567px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>検証コードの入力を求められた場合、次のコマンドで確認します：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> /usr/share/kibana/bin/kibana-verification-code\nYour verification code is:  <span class=\"token number\">297</span> <span class=\"token number\">245</span></code></pre></div>\n<p>これにより、Kibana への登録が完了し、ダッシュボードにアクセスできるようになります。</p>\n<h3 id=\"82-初期ユーザーとパスワードの設定\" style=\"position:relative;\"><a href=\"#82-%E5%88%9D%E6%9C%9F%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-label=\"82 初期ユーザーとパスワードの設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8.2 初期ユーザーとパスワードの設定</h3>\n<ol>\n<li>初期ユーザーのパスワードリセット</li>\n</ol>\n<p>初期ユーザー（<code class=\"language-text\">elastic</code>ユーザー）のパスワードをリセットする必要がある場合、次のコマンドを使用します：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> /usr/share/elasticsearch/bin/elasticsearch-reset-password <span class=\"token parameter variable\">-u</span> elastic\n\nThis tool will reset the password of the <span class=\"token punctuation\">[</span>elastic<span class=\"token punctuation\">]</span> user to an autogenerated value.\nThe password will be printed <span class=\"token keyword\">in</span> the console.\nPlease confirm that you would like to <span class=\"token builtin class-name\">continue</span> <span class=\"token punctuation\">[</span>y/N<span class=\"token punctuation\">]</span>y\n\n\nPassword <span class=\"token keyword\">for</span> the <span class=\"token punctuation\">[</span>elastic<span class=\"token punctuation\">]</span> user successfully reset.\nNew value: x12jdt0IMA*cjKCLUau*</code></pre></div>\n<p>自動生成されたパスワードが表示されるので、これを使用してログインします。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 488px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9865e94c77bb33bba7b58cda11bb7b78/bd48c/elastic_user_password.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 105.69620253164558%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACJklEQVR42qVTyW7UQBDNXyF+A/EBiG+AG3wCEjfuCO4haAhJhNiyABcQh7Apc4AMGcb72O3e/ahqzzBjYBIHLD+5u939uuq9qjVjPc6CNg7GWPTZu9ZnU9M04Oe/CTkypvr29SOOj+7C00SfEemphIoIQe/z0QiDzweAbaD0PxBatxgLqaCkhNEGNY2ta1pNexPSZkkHOTVP2rF8xrXpK1qTyoQ1vnT54r8S8u2ilniwsYH1hwM8fbGLzcfb2N07wN7+Kzx7SfOtHQwebWJr+wmiJJvp6lZHyD/zokSSZojiDJMooXGONCvCl9fGPyaIiUzUrQQrI9SmhaNrPYNuD/BYmrcy8PfUlB3d5OgkH7QrXXRL8GHfHB1CNoDLIS8tSmEDOUdxHuhZOQVCRSXBC1FaYhIXIeXzPNxJitxfENKE9YjzKcYkeqVcb5TSQc+C6qRcCYHvkwQnUYYpbRLa9wY73SWkdIWoMR6fIE1T+kE6ekcG+Q6a4PAClCxprqiDzJ8aWnIuzwuISgRSRhQTkpR0pVqkOtTcMdYFcJ9zVQxHKclUhvNccoGQ24l/cug16SI5DTImxMAuYobfImTMI/9liiJWKlPsvE9x4cZbXL79AZduHeLizXd4czQNLvoerncJG4fXXwpcufMJ1+8Pce3eEFdpfHgsWsKmD6Fe1pBNEZC1QFVVAfNxUVaY9kAtdbf1pOIuMajIsao2KAm1ajuoD+at9xOLz114qUtb4AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"elastic_user_password.png\"\n        title=\"\"\n        src=\"/static/9865e94c77bb33bba7b58cda11bb7b78/bd48c/elastic_user_password.png\"\n        srcset=\"/static/9865e94c77bb33bba7b58cda11bb7b78/c26ae/elastic_user_password.png 158w,\n/static/9865e94c77bb33bba7b58cda11bb7b78/6bdcf/elastic_user_password.png 315w,\n/static/9865e94c77bb33bba7b58cda11bb7b78/bd48c/elastic_user_password.png 488w\"\n        sizes=\"(max-width: 488px) 100vw, 488px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"83-kibana-の初期設定\" style=\"position:relative;\"><a href=\"#83-kibana-%E3%81%AE%E5%88%9D%E6%9C%9F%E8%A8%AD%E5%AE%9A\" aria-label=\"83 kibana の初期設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8.3 Kibana の初期設定</h3>\n<ol>\n<li>ダッシュボード設定</li>\n</ol>\n<p>ログイン後、Kibana のダッシュボードに移動します。初回ログイン時には、インデックスパターンの設定が必要です。</p>\n<p>左ペインの「Management」→「Stack Management」→「Kibana」→「Data Views」を選択し、新しいデータビュー（インデックスパターン）を作成します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 244px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1b6ff090109fba7b3e561a06685716a0/0cba8/management_stack_management.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 105.0632911392405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACBklEQVR42r1VXW+bQBDk//+Wtm9tH6q2jvtcNUqEHcBgwCSYz9hgMGC46e5h0gRHqptEPWl0e8feaPZ22VPatkMnhATbgueO1t2fmUHb/R75jHE4dOCxtFdQ2Mh3BYqyBJ/K85wcDhJd16Gua2nz3LYtxoN9+DsP2/F6wkt1jrmxQFM3ePf+AyYXU0ynP/Dx02dMJlN8n1zgy9dviONYHuQoGDwyEhAE4VPCmohYAQ9W0TS9ou02k2tW8Jy6gZxVPiF87RjUPhDGSYooTuj+CkRRQnaKbZa9gpAILNtFluXw/RCm5SCM4pcTvnnI/jqEppuY3RgwFktohgVr6cL17h6c/4mQs1qWe6TpBhvKbJbvJIqifJnC/b5CVVWom+ZtQl4HEdSZAZ1C5XobHM6I9j8lhWtwRQkISCmDa1GcK+85wh01B+/Wh+PeIghjmfXhdxofOouQD4vjpYlH6NuW+KvaE0LH9SgpOnTdos0VrtUbWZdzbQHTtGV9svNZhGwfqEnWssM01Fmo23D/4zWVEc8V7Zdldex/4gTcZAdhCnfqdZhKhPE9omSDuzUlJ6KGkWxpvpf7DD9IUFbNCXb7mjo+ZA4UNkzbwzXV4UwzpX2l6hSmiV9Xc/y8VKEtbLnWTQcFEYyRE2FLPEu6LkUc3xMOXb4bj+1ueGeGb/31jNHQNYljtfwGkPBhf1CfJl8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"management_stack_management.png\"\n        title=\"\"\n        src=\"/static/1b6ff090109fba7b3e561a06685716a0/0cba8/management_stack_management.png\"\n        srcset=\"/static/1b6ff090109fba7b3e561a06685716a0/c26ae/management_stack_management.png 158w,\n/static/1b6ff090109fba7b3e561a06685716a0/0cba8/management_stack_management.png 244w\"\n        sizes=\"(max-width: 244px) 100vw, 244px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 226px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/95865e074c4208f2a28025f123c8ecbb/5f7d4/stack_management_data_views.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 122.15189873417722%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACaElEQVR42pVVy5KiQBD0/z9nI2aNvexp1icqoMCMCvhCYR47ogg0orlVrYwzhw3h0EHToUVmZWZ1LUlziOyE7HhGKk5y8VnxrLpq/Me39xAb/x3bbYRteEB0EPig/T5KKxeuHXNA6aqo13/h4ccDftZ/Qx9Z0PQnrLyAkANxcixfUNIjyuJISET+ja4Qt7PSBUV2hrfaYOn58PwAwesWi5UHb/0CP3jDoQI6WZApTSY2Gq0uHhstDI0xmp0O/tC+rfSxq9hHSTncxwh3sTyIYvHZs7giuk/K7myOx04bmqpjty8QXYumFSnHCfuQkaVULJHiHPOzXOzNjJ6VEa7XARzXw2LpwZktaO9i4vBzKd/5o9VUJr+5sxVsZw7zeUKFHFhjB7a9xNSZkdJ5NVEOcSb9ll+p7ikpSZpdKFML4iSrZhvXnaPVUdDr9aFqGobWFE1FQaPdgGZYMIwRoTyVRyjtQSsmpJxjXjuyUpHnfZSU7qPsob8JYFoTuPOlVPrrxEnTUzVj848jQmOYzzQUTJkM/kh6zfGlaF49KWxgQQWiQ4owjGmMRTgQdUmZziIpVFlRKCnNJmW304NlmLBMB6qqQSGR+soA6shAX1MJvbhLv1b0SlzpsVV4grNAbCfONk8c3pfJ9sXYax/j8RTzxRIzEoYHK59/7SGLU1qUl9e/eDIt2ORH113QbLxMakbKhYU434Qq5UPpv1QmoqC6I+99bPfY0VgLSaCLJ5NLqu6JYtsO2u0uBgMdHRJjoOvQhkMM6W7pD1To+gBKo0+idcmrHvge+l8/a8XmRudG65vBqZ98I94T5h+7SzOl+vkLsAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stack_management_data_views.png\"\n        title=\"\"\n        src=\"/static/95865e074c4208f2a28025f123c8ecbb/5f7d4/stack_management_data_views.png\"\n        srcset=\"/static/95865e074c4208f2a28025f123c8ecbb/c26ae/stack_management_data_views.png 158w,\n/static/95865e074c4208f2a28025f123c8ecbb/5f7d4/stack_management_data_views.png 226w\"\n        sizes=\"(max-width: 226px) 100vw, 226px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol start=\"2\">\n<li>インデックスパターンの設定</li>\n</ol>\n<p>データビュー名に<code class=\"language-text\">messages-*</code>のように、Fluentd から送信されたログのインデックスパターンを指定します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a59ac1fd3210843e403cee54b5aac467/073e9/create_data_view.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.0253164556962%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA50lEQVR42q2R3Y6DIBCFef93rLironVbIyIgf54dqBdN9qaaPckXZkJy5jCwdV3Rth2G4Y5OCPTDACF6jOOIfd9Pw7Lh7Vahrr9QVRy8rsE5x3fT4IqYcx7G2D8XeVpK5ygJc+FDRCCcD1SH0uczxPQ5IRVTSujwfE6QUh7RrlMSRnKfZoVFaXgfX9C0T3E+IVKy/oc8tMuGEdbaQkoRVxXT8WRjHZrujlaMeEwL5sVAKovVuNPkXbIcNzfa+mIklYHSGwz1Z9DkkdfHNtrZpDbCYaYdPJYNni6uiu3H76Q3dlwXwz/rF2BOr9bRvQX4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create_data_view.png\"\n        title=\"\"\n        src=\"/static/a59ac1fd3210843e403cee54b5aac467/f058b/create_data_view.png\"\n        srcset=\"/static/a59ac1fd3210843e403cee54b5aac467/c26ae/create_data_view.png 158w,\n/static/a59ac1fd3210843e403cee54b5aac467/6bdcf/create_data_view.png 315w,\n/static/a59ac1fd3210843e403cee54b5aac467/f058b/create_data_view.png 630w,\n/static/a59ac1fd3210843e403cee54b5aac467/073e9/create_data_view.png 719w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol start=\"3\">\n<li>Discover でログの確認</li>\n</ol>\n<p>Kibana の「Discover」機能を使用して、Elasticsearch に保存されたログデータを確認できます。これにより、ログの可視化やクエリの作成が可能になります。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 238px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d1f87dc43550297be8e1e0f92876a1ca/5ea4d/analytics_discover.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 108.22784810126582%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB/0lEQVR42q1UCW7bMBDU/z/SRzSoW6BJkB52Dre2Y/m+JVnWQZGiKGm6JGJHQBpbTrLAgMtruOTO0spUDlmWkEUB42c5UqmoVcbfQ8+9Br02e1pjQVsgAZ4ZtyTyg1X9I1bdYwi/f7rAZu6iKAs0Gt9weXmNzxdf0PhK/tU1Fovly8Mqpue5EM+Ebd/BPOW0A/D9HRzHwWw2h+O6cD0PSZIcjVBKiYKe7EC4P7185aplTRhClRcIGQcTKXiaQRC4IKQSQmZPUCfBU4WcuCydmZ/NB1zdNNG66+Dm1x1+/L7HdheZhYxLJHTAKTBKqg7OyunujAsEEUPEEoQxQ0i+pIP0gpQkUQeCoLnMGwZBRA/PEYYRYiIUlLEojk2/rCmdg2z0hul0gU7PRq83QN8eGd8ejPHYH0IpdR7hMX29xUyEG8fDcrUhga4wJ8SM4a0HmQi3foDVysF67WA6WxBh8j7Cj7y2IdSJaN3+wSO1Ostn/Av/J9S1uAtCBGFIas/fFbGlQxFUZoqIdIFnWWZItVx0X5fTfuysKzdbD6a9b3fRI/0tlmt0un387fRNv3nbhuf5J6M/6LC6qKyM7cczpX9lVS/C3S7AdutTqcVGkz7JiNEf6Hpb42sI+o1qX3m9cU2pDYYTdKn8hqOZIR6MJhhPZrDtMX26Xq1kWfhg+webnrbVmh+0QAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"analytics_discover.png\"\n        title=\"\"\n        src=\"/static/d1f87dc43550297be8e1e0f92876a1ca/5ea4d/analytics_discover.png\"\n        srcset=\"/static/d1f87dc43550297be8e1e0f92876a1ca/c26ae/analytics_discover.png 158w,\n/static/d1f87dc43550297be8e1e0f92876a1ca/5ea4d/analytics_discover.png 238w\"\n        sizes=\"(max-width: 238px) 100vw, 238px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/afd704bae6b081bfc8222f1b4f53e18b/7ebf9/discover_dashboard.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABhklEQVR42p2RW07DMBBFs1AWwQ74Qqp4tZS2VIh1sQEo0KRp4rcdO7nMOC0CAT9EOhpb9pzMjIvJfIXJ5QzT2QI3BMfZ7RJTYrl6wGr9iLvFGrd0j5nf3efI53z/4nqOK+LsfIqT0wsUe5fg0oBhGPCf75jV9UBlgUJKAWscyqbFc13COg+hNZSzsMHDh4BApJQQY8rxSIzxc933PRWVUBhj8x8aq/G0fYFwJq83co/aqLyWWuVklndM12UBE4/yA4VSOh+ELkFIB2PMmDD0h56GfD5WQckkZjmPiOG7oYtjDN1Y4SiMaCS1qh12e4HX9xJv2x22VU37Fru6xb6RkMpCWw8XYsaH9I3COpdHy0JtPFXos3DzVpK0QllR67RnKQsVzdu48Cn8iicKFvHHA7fW5UdR2pCkIUGLphV5L2k0miKfc07qh18pjs/PbXuaASOEQlnuUHG7dZOlLBdSwXl6FH7tv4TxMGQWNS21pC2M9TkympDKkIwqpHad76hKlvY/4If9AJ7R85Y+Q79FAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"discover_dashboard.png\"\n        title=\"\"\n        src=\"/static/afd704bae6b081bfc8222f1b4f53e18b/f058b/discover_dashboard.png\"\n        srcset=\"/static/afd704bae6b081bfc8222f1b4f53e18b/c26ae/discover_dashboard.png 158w,\n/static/afd704bae6b081bfc8222f1b4f53e18b/6bdcf/discover_dashboard.png 315w,\n/static/afd704bae6b081bfc8222f1b4f53e18b/f058b/discover_dashboard.png 630w,\n/static/afd704bae6b081bfc8222f1b4f53e18b/40601/discover_dashboard.png 945w,\n/static/afd704bae6b081bfc8222f1b4f53e18b/78612/discover_dashboard.png 1260w,\n/static/afd704bae6b081bfc8222f1b4f53e18b/7ebf9/discover_dashboard.png 1919w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>KQL については、ドキュメントを参照してください。</p>\n<p><a href=\"https://www.elastic.co/guide/en/kibana/current/discover.html\">https://www.elastic.co/guide/en/kibana/current/discover.html</a></p>\n<h2 id=\"9-ログの保管および転送設定\" style=\"position:relative;\"><a href=\"#9-%E3%83%AD%E3%82%B0%E3%81%AE%E4%BF%9D%E7%AE%A1%E3%81%8A%E3%82%88%E3%81%B3%E8%BB%A2%E9%80%81%E8%A8%AD%E5%AE%9A\" aria-label=\"9 ログの保管および転送設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9. ログの保管および転送設定</h2>\n<p>Fluentd で収集したログの保管方法や転送先の設定について説明します。ログの適切な保管や転送設定により、長期的なデータの保持と必要な情報の効率的な取り出しが可能になります。</p>\n<h3 id=\"91-インデックスのライフサイクルポリシー設定\" style=\"position:relative;\"><a href=\"#91-%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%81%AE%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB%E3%83%9D%E3%83%AA%E3%82%B7%E3%83%BC%E8%A8%AD%E5%AE%9A\" aria-label=\"91 インデックスのライフサイクルポリシー設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9.1 インデックスのライフサイクルポリシー設定</h3>\n<p>Elasticsearch に保存されたログデータは、インデックスライフサイクル管理 (ILM) を使用して、データの自動管理を行うことができます。ILM を使用することで、データの保管期間を自動的に管理し、不要になったデータを削除することが可能です。</p>\n<ol>\n<li>ライフサイクルポリシーの定義</li>\n</ol>\n<p>Elasticsearch の Dev Tools を使用して、インデックスのライフサイクルポリシーを定義します。以下の例では、データを 180 日間保管した後に削除するポリシーを定義しています。</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">PUT _ilm/policy/my_policy\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"policy\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"phases\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"delete\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"min_age\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"180d\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"actions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"delete\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"2\">\n<li>インデックステンプレートの作成</li>\n</ol>\n<p>新しく作成されるインデックスに対してライフサイクルポリシーを適用するために、インデックステンプレートを作成します。以下の設定では、<code class=\"language-text\">messages-*</code>というパターンにマッチするインデックスに対してライフサイクルポリシーが適用されます。</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">PUT _index_template/messages_template\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"index_patterns\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"messages-*\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"template\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"settings\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"number_of_shards\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"number_of_replicas\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"index.lifecycle.name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"my_policy\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"index.lifecycle.rollover_alias\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"messages\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"3\">\n<li>既存インデックスの整理</li>\n</ol>\n<p>検証やテストで使用した古いインデックスを削除し、新しいポリシーに基づいてインデックスが管理されるようにします。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">DELETE messages-*</code></pre></div>\n<h3 id=\"92-oci-オブジェクトストレージへのログ転送設定\" style=\"position:relative;\"><a href=\"#92-oci-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8%E3%81%B8%E3%81%AE%E3%83%AD%E3%82%B0%E8%BB%A2%E9%80%81%E8%A8%AD%E5%AE%9A\" aria-label=\"92 oci オブジェクトストレージへのログ転送設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9.2 OCI オブジェクトストレージへのログ転送設定</h3>\n<p>OCI（Oracle Cloud Infrastructure）のオブジェクトストレージにログを転送することで、長期的なログの保管とバックアップを行います。Fluentd を使用して、OCI オブジェクトストレージにログを転送するための設定手順を以下に説明します。</p>\n<h4 id=\"921-oci-の設定\" style=\"position:relative;\"><a href=\"#921-oci-%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-label=\"921 oci の設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9.2.1 OCI の設定</h4>\n<p>まず、OCI 側で必要な設定を行います。これには、ユーザーの認証情報の取得とオブジェクトストレージの設定が含まれます。</p>\n<ol>\n<li>Customer Secret Key の生成</li>\n</ol>\n<p>OCI コンソールにログインし、ユーザー詳細ページから Customer Secret Key を生成します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 548px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/acab7f7a6c922ce4a0539c6f9b40510b/a58fe/customer_secret_key.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.88607594936708%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACEklEQVR42n1T7W7aQBD0+79AI9Qm6t9W/dMKlKiUvkClVkloAAdssH0ftsEGnADGMN09bBcaUqTR2txqbnZ2bCWzGGkyrTGbRmexXM5RbHNs8zU2G8YKq+cMT9kSWbYweCJYvjdG4E8MQi3BFxxjFodYzBPc/vyBTx8/oNVs4nunjc63NnoPXYjAowtjTKmPYSkZQAkfkhCGqj6olMWRNsRjZ4jf3TvY9gCuM8LYdaCkqKeqCaNQQ2uFKApPDirE8YEwpJ7O12u0b1q4bn7GTesLJu4QWkmaIEXONqxXpJAavSCA1KyOCKcHmHEZ9MwjsyXvLxu4enuBy8YF3jXeYEAjayWQkb+7XYGi2MLy/AADx4XreYZ4Qu++EER4GDkpSZeLFMCe6hxKa/CvKAoi2hmiLS2Ml2Vp8m3i+0ZNmpTLYP9KouRI5Xr9jDlVPstp23m+MWAyBj9bfiDw6NKGyfyIkJbbnXOMSrIqNtjvjbI9VVZ1DlZA49nOGEJKGlmY5TCkUmB/Z+UFaTKDpEQMBj3q82rPXhBq8sMZTw7+ETy6wBcB7vuP6NqjekEJKWZwjDh3VZiz5Wm1ODIjIuzaQ9z1h5TFv2OfBLwk5txx/TdedQ57Qwe/Hmzckxqh5AuCysPkzCXHfRWs/sjFLSnjyupi8s/U8ms5Jv0fcdVnxRRmHlvzF0PgrbOf/N9rKl8jZ8I/iVwWOKVgtUIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"customer_secret_key.png\"\n        title=\"\"\n        src=\"/static/acab7f7a6c922ce4a0539c6f9b40510b/a58fe/customer_secret_key.png\"\n        srcset=\"/static/acab7f7a6c922ce4a0539c6f9b40510b/c26ae/customer_secret_key.png 158w,\n/static/acab7f7a6c922ce4a0539c6f9b40510b/6bdcf/customer_secret_key.png 315w,\n/static/acab7f7a6c922ce4a0539c6f9b40510b/a58fe/customer_secret_key.png 548w\"\n        sizes=\"(max-width: 548px) 100vw, 548px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 314px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6e5407d7dc64f8fb1a2d7c54e476063a/5b158/create_customer_secret_key.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 214.55696202531644%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAYAAAB4pah1AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACMElEQVR42u2X32/SUBTH77/owxITHxYTs+iLvhljYnzw/1lwG4OVAYrDMGcY2QAng7ajKetYodAfbLS9fD23dEs0TDOyN9vk03PuTe73nnN7m5zDOA8Rhj445wh8H45r0zjEzTObzcSbLI98QRgGEOsWwcQi7ayDQk7CfqWC7E4GBwffUK1WMR6PYF5eolar4rD6HXkph8aPOjLZbTjehFbyxYID00Axl8WXchl75RLarRPIikyCFi76Bpr1Ohr1I3wuFnFI4oVCHrZtR5H/GS0TE6EYUJr8Ni0+TzNOWRzHfA6xPxdaBHMoCsHEdeDYI4ysAcbWkLixixjAHlkLYZ4zhm2Z0NQOnVcf/pWLa8/GdOIsBbvyHKhKG+upFPZrx9B7PciqujTMozSbp21o5wbU7hnaigLDNDGwLJhLwFwSbLTa0PUems0j2qVDV8KL7mIQBPeGTegM1a6GU0WFqumQyW/JCk46Mn4uQRThhP4OYcXXdgW2BXEUy8Buhcg+BOyhhBLBRDARTAQTwUQwEfxfBEUpYo+Gd3KfUoXNy2FqJYIptRXXCAXkh34M+aIojUpnsfm/BGdUsF8Y59jd2canQm5OXkJxV4p8Md/TNareebzp34naiq97Jaw9XcWHd2/x6vkzPFl5hJcv1vD+zWusPl5BqZiD53NIlWNo/WHcDYRxM/Q7kaDR05HeSEHKpJHZ2kB6M4VsejMab31ch651IxHb9TClKGZ3dFGiT/kFtMu/LcGrjbUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create_customer_secret_key.png\"\n        title=\"\"\n        src=\"/static/6e5407d7dc64f8fb1a2d7c54e476063a/5b158/create_customer_secret_key.png\"\n        srcset=\"/static/6e5407d7dc64f8fb1a2d7c54e476063a/c26ae/create_customer_secret_key.png 158w,\n/static/6e5407d7dc64f8fb1a2d7c54e476063a/5b158/create_customer_secret_key.png 314w\"\n        sizes=\"(max-width: 314px) 100vw, 314px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>生成された Secret Key と Access Key を控えておきます。Secret Key は、「生成されたキー」から、Access Key は画面を戻した先の「アクセス・キー」から確認できます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0b34752038819c64b892647239dc7c39/cc155/generated_secret_key.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.658227848101264%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAZklEQVR42o2OUQqAMAxDvf85FZ12nXS6ituMOhARFPx4JFAaXjVYC2aCakBKETmnwtnfuO5fVD1ZuGOwMy2M6TB5QQgzRMaSjhlNU4OIwI6hi2Lb8vegn/V4svAit0V6Gsa4Fv5Y7vPa6kOwuJOjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"generated_secret_key.png\"\n        title=\"\"\n        src=\"/static/0b34752038819c64b892647239dc7c39/f058b/generated_secret_key.png\"\n        srcset=\"/static/0b34752038819c64b892647239dc7c39/c26ae/generated_secret_key.png 158w,\n/static/0b34752038819c64b892647239dc7c39/6bdcf/generated_secret_key.png 315w,\n/static/0b34752038819c64b892647239dc7c39/f058b/generated_secret_key.png 630w,\n/static/0b34752038819c64b892647239dc7c39/cc155/generated_secret_key.png 886w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9bcd9c5fa22498b21bdff3b9c460eadf/ae77d/generated_access_key.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.51898734177215%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAArElEQVR42l2PzQ6CMBCEef/XMSY+gdEYNPFkCN5FoC1aSn8o43YjBD182dnZdjvNzvkJx8Me97KAaGtI0TDqW1nLdtH/KLnSokV2veTYbTcoixusHRC8gyfGMSw4Z7nGGInxZ7Ym3ct6/UZTPxGCZ6rqAU1eOpD6aYo8rwnTa5558ucl6YEYA8ML03cERfWczMIOBp4SJT3j3ABjNNEzqU9+10koJagq9rV+4QNM2zLn3nhyQwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"generated_access_key.png\"\n        title=\"\"\n        src=\"/static/9bcd9c5fa22498b21bdff3b9c460eadf/f058b/generated_access_key.png\"\n        srcset=\"/static/9bcd9c5fa22498b21bdff3b9c460eadf/c26ae/generated_access_key.png 158w,\n/static/9bcd9c5fa22498b21bdff3b9c460eadf/6bdcf/generated_access_key.png 315w,\n/static/9bcd9c5fa22498b21bdff3b9c460eadf/f058b/generated_access_key.png 630w,\n/static/9bcd9c5fa22498b21bdff3b9c460eadf/40601/generated_access_key.png 945w,\n/static/9bcd9c5fa22498b21bdff3b9c460eadf/ae77d/generated_access_key.png 1111w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>Secret Key 例：<code class=\"language-text\">+Hpy1c5rG+Eub+DrBHDAVTw7k1W3Vs1Hziu3MdDzoSM=</code></li>\n<li>Access Key 例：<code class=\"language-text\">f969a8c69d321afd5f1e0eag9953d9e6b962f042</code></li>\n</ul>\n<h4 id=\"922-fluentd-の設定\" style=\"position:relative;\"><a href=\"#922-fluentd-%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-label=\"922 fluentd の設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9.2.2 Fluentd の設定</h4>\n<p>次に、Fluentd の設定を行い、OCI オブジェクトストレージへのログ転送を設定します。</p>\n<ol>\n<li>プラグインのインストール</li>\n</ol>\n<p>OCI は S3 互換 API を提供しているため、fluentd で AWS S3 用のプラグインを使って OCI オブジェクト・ストレージにログをアップロードすることができます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> td-agent-gem <span class=\"token function\">install</span> fluent-plugin-s3</code></pre></div>\n<ol start=\"2\">\n<li>Fluentd の設定ファイルを編集</li>\n</ol>\n<p><code class=\"language-text\">/etc/td-agent/td-agent.conf</code>ファイルを編集し、OCI オブジェクトストレージへのログ転送設定を追加します。</p>\n<p><code class=\"language-text\">YOUR_OCI_USER_OCID</code>、<code class=\"language-text\">YOUR_OCI_AUTH_TOKEN</code>、<code class=\"language-text\">YOUR_BUCKET_NAME</code>には、それぞれ取得した OCID、生成したトークン、OCI 上のオブジェクトストレージのバケット名を設定します。</p>\n<p><code class=\"language-text\">s3_region</code>と<code class=\"language-text\">s3_endpoint</code>は OCI のリージョンやバケットのエンドポイントを設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;source>\n  @type tail\n  path /var/log/messages\n  pos_file /var/log/td-agent/messages.pos\n  tag messages\n  format none\n&lt;/source>\n\n&lt;filter **>\n  @type record_transformer\n  &lt;record>\n    hostname ${hostname}\n  &lt;/record>\n&lt;/filter>\n\n&lt;match messages>\n  @type copy\n  &lt;store>\n    @type elasticsearch\n    host localhost\n    port 9200\n    type_name log\n    include_tag_key true\n    logstash_prefix messages\n    logstash_format true\n  &lt;/store>\n  &lt;store>\n    @type s3\n    aws_key_id \"YOUR_OCI_USER_OCID\"\n    aws_sec_key \"YOUR_OCI_AUTH_TOKEN\"\n    s3_bucket \"YOUR_BUCKET_NAME\"\n    s3_region \"us-phoenix-1\"\n    s3_endpoint \"https://&lt;namespace>.compat.objectstorage.&lt;region>.oraclecloud.com\"\n    check_apikey_on_start false\n    ssl_verify_peer false\n    force_path_style true\n    path %Y/%m/%d/bastion/messages.log\n    &lt;buffer>\n      @type file\n      path /var/log/td-agent/buffer/messages.buffer\n      timekey 1d\n      timekey_wait 10m\n      queue_limit_length 256\n      flush_at_shutdown true\n      flush_interval 1s\n      retry_wait 30s\n      retry_max_times 9\n    &lt;/buffer>\n  &lt;/store>\n&lt;/match></code></pre></div>\n<ol start=\"3\">\n<li>Fluentd の再起動</li>\n</ol>\n<p>設定が完了したら、Fluentd サービスを再起動して変更を反映させます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl restart td-agent.service</code></pre></div>\n<h3 id=\"93-oci-オブジェクトストレージにおけるライフサイクルポリシー設定\" style=\"position:relative;\"><a href=\"#93-oci-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB%E3%83%9D%E3%83%AA%E3%82%B7%E3%83%BC%E8%A8%AD%E5%AE%9A\" aria-label=\"93 oci オブジェクトストレージにおけるライフサイクルポリシー設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9.3 OCI オブジェクトストレージにおけるライフサイクルポリシー設定</h3>\n<p>OCI オブジェクトストレージに保存されるログファイルのライフサイクルを管理するために、ライフサイクルポリシーを設定します。これにより、指定した日数が経過したログファイルを自動的にアーカイブまたは削除することができます。</p>\n<h4 id=\"931-iam-ポリシーの設定\" style=\"position:relative;\"><a href=\"#931-iam-%E3%83%9D%E3%83%AA%E3%82%B7%E3%83%BC%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-label=\"931 iam ポリシーの設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9.3.1 IAM ポリシーの設定</h4>\n<p>まず、OCI オブジェクトストレージに対してライフサイクルポリシーを適用するために必要な IAM ポリシーを設定します。</p>\n<ol>\n<li>IAM ポリシー・ステートメントの追加</li>\n</ol>\n<p>OCI コンソールで、対象のコンパートメントに対して以下の IAM ポリシーを追加します。</p>\n<p>ポリシー例：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Allow service objectstorage-ap-tokyo-1 to manage object-family in compartment &lt;コンパートメント名></code></pre></div>\n<p>このポリシーにより、オブジェクトストレージ内のオブジェクトファミリー（バケットやオブジェクト）を管理する権限が付与されます。</p>\n<h4 id=\"932-ライフサイクルポリシーの設定\" style=\"position:relative;\"><a href=\"#932-%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB%E3%83%9D%E3%83%AA%E3%82%B7%E3%83%BC%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-label=\"932 ライフサイクルポリシーの設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9.3.2 ライフサイクルポリシーの設定</h4>\n<p>次に、対象のバケットに対してライフサイクルポリシーを設定します。</p>\n<ol>\n<li>バケットの選択</li>\n</ol>\n<p>OCI コンソールのオブジェクトストレージページに移動し、対象のバケットを選択します。</p>\n<ol start=\"2\">\n<li>ライフサイクルポリシールールの設定</li>\n</ol>\n<p>「ライフサイクル・ポリシー・ルール」セクションで、新しいルールを追加します。</p>\n<p>以下は、一般的なライフサイクルポリシーの例です：</p>\n<ul>\n<li>アーカイブ・ルール（archive-lifecycle-rule）: ログファイルを 180 日後にアーカイブに移動。</li>\n<li>削除・ルール（delete-lifecycle-rule）: ログファイルを 1,095 日後（約 3 年）に削除。</li>\n</ul>\n<ol start=\"3\">\n<li>ポリシーの適用</li>\n</ol>\n<p>ルールの設定が完了したら、「保存」をクリックしてライフサイクルポリシーをバケットに適用します。</p>\n<h2 id=\"10-kibana-でのログ可視化とアラート発砲\" style=\"position:relative;\"><a href=\"#10-kibana-%E3%81%A7%E3%81%AE%E3%83%AD%E3%82%B0%E5%8F%AF%E8%A6%96%E5%8C%96%E3%81%A8%E3%82%A2%E3%83%A9%E3%83%BC%E3%83%88%E7%99%BA%E7%A0%B2\" aria-label=\"10 kibana でのログ可視化とアラート発砲 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>10. Kibana でのログ可視化とアラート発砲</h2>\n<p>Kibana は Elasticsearch に保存されたデータを可視化するための強力なツールです。ログデータを視覚的に分析し、インサイトを得るために、Kibana を使ってダッシュボードを作成したり、クエリを実行したりする方法について説明します。</p>\n<h3 id=\"101-データビューインデックスパターンの作成\" style=\"position:relative;\"><a href=\"#101-%E3%83%87%E3%83%BC%E3%82%BF%E3%83%93%E3%83%A5%E3%83%BC%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AE%E4%BD%9C%E6%88%90\" aria-label=\"101 データビューインデックスパターンの作成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>10.1 データビュー（インデックスパターン）の作成</h3>\n<p>まず、Kibana で Elasticsearch のデータを可視化するために、インデックスパターン（データビュー）を作成します。</p>\n<ol>\n<li>データビューの作成</li>\n</ol>\n<p>Kibana の左ペインから「Management」→「Stack Management」→「Kibana」→「Data Views」を選択します。</p>\n<p>「Create Data View」ボタンをクリックし、新しいインデックスパターンを作成します。</p>\n<ol start=\"2\">\n<li>インデックスパターンの指定</li>\n</ol>\n<p>データビュー名には、Fluentd から Elasticsearch に送信されたログのインデックスパターンを指定します。例えば、<code class=\"language-text\">messages-*</code>のようにワイルドカードを使用して複数のインデックスをまとめて指定できます。</p>\n<p>「Time filter field name」には、タイムスタンプが記録されているフィールド（通常は<code class=\"language-text\">@timestamp</code>）を指定します。</p>\n<ol start=\"3\">\n<li>データビューの保存</li>\n</ol>\n<p>設定が完了したら「Create Data View」ボタンをクリックしてデータビューを保存します。</p>\n<h3 id=\"102-discover-でログの検索とフィルタリング\" style=\"position:relative;\"><a href=\"#102-discover-%E3%81%A7%E3%83%AD%E3%82%B0%E3%81%AE%E6%A4%9C%E7%B4%A2%E3%81%A8%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0\" aria-label=\"102 discover でログの検索とフィルタリング permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>10.2 Discover でログの検索とフィルタリング</h3>\n<p>作成したデータビューを使用して、Elasticsearch に保存されたログを Kibana の「Discover」機能で検索、フィルタリングします。</p>\n<ol>\n<li>Discover の使用</li>\n</ol>\n<p>Kibana の左ペインから「Discover」を選択します。作成したデータビュー（例: <code class=\"language-text\">messages-*</code>）を選択します。</p>\n<ol start=\"2\">\n<li>クエリの実行</li>\n</ol>\n<p>KQL (Kibana Query Language) を使用して、ログデータをフィルタリングできます。例えば、特定のホストからのログを検索する場合は、<code class=\"language-text\">hostname: \"your-hostname\"</code>のようなクエリを実行します。時間範囲を指定して、特定の期間内のログのみを表示することも可能です。</p>\n<ol start=\"3\">\n<li>フィールドのカスタマイズ</li>\n</ol>\n<p>Discover ビューでは、表示するフィールドをカスタマイズできます。右側のフィールドリストから必要なフィールドを選択し、ドラッグ＆ドロップで表示を調整します。</p>\n<h3 id=\"103-ダッシュボードの作成\" style=\"position:relative;\"><a href=\"#103-%E3%83%80%E3%83%83%E3%82%B7%E3%83%A5%E3%83%9C%E3%83%BC%E3%83%89%E3%81%AE%E4%BD%9C%E6%88%90\" aria-label=\"103 ダッシュボードの作成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>10.3 ダッシュボードの作成</h3>\n<p>Kibana のダッシュボード機能を使用して、複数のビジュアライゼーションを一つの画面にまとめ、リアルタイムでデータをモニタリングできるようにします。</p>\n<ol>\n<li>ダッシュボードの作成</li>\n</ol>\n<p>Kibana の左ペインから「Dashboard」を選択し、「Create Dashboard」ボタンをクリックします。</p>\n<ol start=\"2\">\n<li>ビジュアライゼーションの追加</li>\n</ol>\n<p>ダッシュボードに追加するビジュアライゼーションを作成します。たとえば、「Visualize Library」から新しいビジュアライゼーションを作成し、折れ線グラフ、棒グラフ、円グラフなどでログデータを視覚化します。</p>\n<p>既存のビジュアライゼーションがある場合、それらをダッシュボードに追加できます。</p>\n<ol start=\"3\">\n<li>ダッシュボードの保存</li>\n</ol>\n<p>作成したダッシュボードは、名前を付けて保存し、必要に応じていつでもアクセスできるようにします。保存後、ダッシュボードは Kibana の「Dashboard」メニューからいつでも閲覧可能です。</p>\n<h2 id=\"11-アラート設定\" style=\"position:relative;\"><a href=\"#11-%E3%82%A2%E3%83%A9%E3%83%BC%E3%83%88%E8%A8%AD%E5%AE%9A\" aria-label=\"11 アラート設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>11. アラート設定</h2>\n<p>Kibana を使用して、特定の条件に基づいてアラートを設定し、ログデータに異常や特定のパターンが検出された際に通知を受けることができます。ここでは、Kibana でアラートを設定するための手順を説明します。</p>\n<p>アラート機能を有効にするためには、Kibana と Elasticsearch にいくつかの設定を追加する必要があります。</p>\n<h3 id=\"111-前提設定\" style=\"position:relative;\"><a href=\"#111-%E5%89%8D%E6%8F%90%E8%A8%AD%E5%AE%9A\" aria-label=\"111 前提設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>11.1 前提設定</h3>\n<h4 id=\"1111-kibana-の設定変更\" style=\"position:relative;\"><a href=\"#1111-kibana-%E3%81%AE%E8%A8%AD%E5%AE%9A%E5%A4%89%E6%9B%B4\" aria-label=\"1111 kibana の設定変更 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>11.1.1 Kibana の設定変更</h4>\n<p>まず、Kibana 用のシステムユーザのパスワードを設定します。</p>\n<p>下のパスワードは任意に設定してください。</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">curl -u elastic<span class=\"token operator\">:</span>your_elastic_password -X POST <span class=\"token string\">\"localhost:9200/_security/user/kibana_system/_password\"</span> -H <span class=\"token string\">\"Content-Type: application/json\"</span> -d '<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"password\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"your_kibana_system_password\"</span>\n<span class=\"token punctuation\">}</span>'</code></pre></div>\n<p>また、設定ファイルに追加するための 32 ビット暗号化キーを OpenSSL を使用して生成します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> openssl rand <span class=\"token parameter variable\">-base64</span> <span class=\"token number\">32</span></code></pre></div>\n<p>Kibana の設定ファイル（<code class=\"language-text\">/etc/kibana/kibana.yml</code>）を編集します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">xpack.encryptedSavedObjects.encryptionKey: \"生成した32バイトのキー\"\n\nelasticsearch.username: \"kibana_system\"\nelasticsearch.password: \"your_kibana_system_password\"</code></pre></div>\n<p>以下の設定をコメントアウトします。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># elasticsearch.serviceAccountToken: \"your_service_account_token\"</code></pre></div>\n<h4 id=\"1112-elasticsearch-の設定変更\" style=\"position:relative;\"><a href=\"#1112-elasticsearch-%E3%81%AE%E8%A8%AD%E5%AE%9A%E5%A4%89%E6%9B%B4\" aria-label=\"1112 elasticsearch の設定変更 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>11.1.2 Elasticsearch の設定変更</h4>\n<p>Elasticsearch の設定ファイルを編集し、セキュリティ機能を有効にします。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /etc/elasticsearch/elasticsearch.yml\n\nxpack.security.enabled: <span class=\"token boolean\">false</span>\n-<span class=\"token operator\">></span>\nxpack.security.enabled: <span class=\"token boolean\">true</span></code></pre></div>\n<h4 id=\"1113-td-agent-の設定変更\" style=\"position:relative;\"><a href=\"#1113-td-agent-%E3%81%AE%E8%A8%AD%E5%AE%9A%E5%A4%89%E6%9B%B4\" aria-label=\"1113 td agent の設定変更 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>11.1.3 td-agent の設定変更</h4>\n<p>td-agent の設定ファイル（<code class=\"language-text\">/etc/td-agent/td-agent.yml</code>）を編集し、Elasticsearch に接続するための認証情報を追加します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;match messages>\n  @type copy\n  &lt;store>\n    @type elasticsearch\n    host localhost\n    port 9200\n    user elastic\n    password x12jdt0IMA*cjKCLUau*\n    type_name log\n    include_tag_key true\n    logstash_prefix messages\n    logstash_format true\n  &lt;/store>\n&lt;/match></code></pre></div>\n<h4 id=\"1114-fek-スタックの再起動\" style=\"position:relative;\"><a href=\"#1114-fek-%E3%82%B9%E3%82%BF%E3%83%83%E3%82%AF%E3%81%AE%E5%86%8D%E8%B5%B7%E5%8B%95\" aria-label=\"1114 fek スタックの再起動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>11.1.4 FEK スタックの再起動</h4>\n<p>全ての設定が完了したら、以下のコマンドで FEK スタックを再起動する。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl restart td-agent elasticsearch kibana</code></pre></div>\n<p>問題が発生した場合は、各サービスのログを確認してトラブルシューティングを行う。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">tail</span> <span class=\"token parameter variable\">-f</span> /var/log/td-agent/td-agent.log\n<span class=\"token function\">sudo</span> <span class=\"token function\">tail</span> <span class=\"token parameter variable\">-f</span> /var/log/elasticsearch/elasticsearch.log\n<span class=\"token function\">sudo</span> <span class=\"token function\">tail</span> <span class=\"token parameter variable\">-f</span> /var/log/kibana/kibana.log</code></pre></div>\n<h3 id=\"112-アラート条件の作成\" style=\"position:relative;\"><a href=\"#112-%E3%82%A2%E3%83%A9%E3%83%BC%E3%83%88%E6%9D%A1%E4%BB%B6%E3%81%AE%E4%BD%9C%E6%88%90\" aria-label=\"112 アラート条件の作成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>11.2 アラート条件の作成</h3>\n<p>Kibana で特定の条件に基づいてアラートを設定します。ここでは、ログデータに特定のメッセージが含まれている場合にアラートを発動する例を示します。</p>\n<ol>\n<li>Discover からアラートを作成</li>\n</ol>\n<p>Kibana の左ペインから「Discover」を選択し、ログデータを表示します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 467px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dfd38034eb96d784a78911bc895403f8/85ff8/discover_alerts.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.88607594936709%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABFUlEQVR42iWNu0oDUQBE96PEvDQPYnxBgpXY2KWzi4VfYGFjJ4KNRcBO/AB/QEwjSFCDD0zYxLibu5vN3dy9m4TjXTNwmGEYGGs9X6G8sUsmWyRlyOZKpI2ns4VlzhRZTRdYSeVJZZKu+L/NrZWoVWtsbW5TKVfYO6izU93HCsMQ4Y8ZOB5BILGHHq4I8PwJ9o/AEWMe2jaPL33eey5D1+fX0OkJ6hdPHF0907huc3je4uz2FQsjHS9wxor5fIHrKybTmHi2QAQRUs1ovbm0Oi79kTmfaEZma4uI4+YHJzdfnN51aTQ/ubzvY02nEUpFaK1JcuKR0oQmDxwfZxQgpUKGS1SkiQ2e6XrmoOtKvg3d5Ewq/gD2P/7kwR/mTAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"discover_alerts.png\"\n        title=\"\"\n        src=\"/static/dfd38034eb96d784a78911bc895403f8/85ff8/discover_alerts.png\"\n        srcset=\"/static/dfd38034eb96d784a78911bc895403f8/c26ae/discover_alerts.png 158w,\n/static/dfd38034eb96d784a78911bc895403f8/6bdcf/discover_alerts.png 315w,\n/static/dfd38034eb96d784a78911bc895403f8/85ff8/discover_alerts.png 467w\"\n        sizes=\"(max-width: 467px) 100vw, 467px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol start=\"2\">\n<li>アラート作成</li>\n</ol>\n<p>「Alert」をクリックし、次に「Create search threthold rule」を選択します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 284px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6a1dcccace0dbedfc926270d9c15a3af/62f93/alerts_create_search_threshold.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.06329113924051%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABnklEQVR42p1SS27bQAzVohfqVbrNBXqFHiLL7IrseoYCXXSTdZ20cFtUn8SyZNmOJVlBFUnz0ytJWYq8K0LgYR6HbzgkZ7xWWTSdgXU92J6JN8qg01b8llbeY53re/SEMV63RjSf70q8u/yJ9x99eIvwgB/3hQT5wHfid1GO9WMt4nj/F4vgEb/XpWi0ccK/0bnbqICzFldfMry5uMHbDwt4qtPQSkGdoJU+W7uug7WUSGu0bTfENO8zNHqrsYwrXH9N8ekmg2fpBmNeoI0RGGpJayNgc85NPkO0etByjM0Q90Yxg+fzGjuNH0+NHhIWRYnNJkOeF/jjh/CDEEm6QRjeIyCsVrGAuR9ECCPaixMExLfb/ZS4btVLhYZab5pGkh4Ix2OFwyFHTpcxr6oniZXlUQqoqkrWuq6nhJ06VdjRoJ8pGc9zbH1sX3wMvnP9FBv8c+00wyTZYLn8hWy7o5YDRNEDtRtht9vDpxGkNI7Vao00zWQUD8TjeEQiBZ0l5MoUlTuatU5ecW7zBzvjM40k5P/FYGfO5/7/gv/sP1VXTHH1HhxCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alerts_create_search_threshold.png\"\n        title=\"\"\n        src=\"/static/6a1dcccace0dbedfc926270d9c15a3af/62f93/alerts_create_search_threshold.png\"\n        srcset=\"/static/6a1dcccace0dbedfc926270d9c15a3af/c26ae/alerts_create_search_threshold.png 158w,\n/static/6a1dcccace0dbedfc926270d9c15a3af/62f93/alerts_create_search_threshold.png 284w\"\n        sizes=\"(max-width: 284px) 100vw, 284px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol start=\"3\">\n<li>ルール設定</li>\n</ol>\n<p>例えば以下のように設定します。</p>\n<ul>\n<li>Name: test-alert</li>\n<li>tag: test</li>\n<li>Define your query: message: \"This is a test message*\"</li>\n<li>WHEN: count</li>\n<li>OVER all documents</li>\n<li>IS ABOVE 1</li>\n<li>FOR THE LAST 5 minutes</li>\n</ul>\n<p>Set the number of documents to send</p>\n<ul>\n<li>SIZE 1</li>\n</ul>\n<p>Actions</p>\n<ul>\n<li>Server Log</li>\n<li>Action Frequency: For each Alert On Status Changed</li>\n<li>Run when: Query matched</li>\n<li>If alert matches a query: kibana.alert.rule.name: test-alert</li>\n<li>Level: Error</li>\n<li>Message</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Elasticsearch query rule '{{rule.name}}' is active:\n\n- Value: {{context.value}}\n- Conditions Met: {{context.conditions}} over {{rule.params.timeWindowSize}}{{rule.params.timeWindowUnit}}\n- Timestamp: {{context.date}}\n- Link: {{context.link}}</code></pre></div>\n<p>として、「Add action」をクリックします。</p>\n<p>最後に、「save」をクリックします。</p>\n<ol start=\"4\">\n<li>アラートの保存とテスト</li>\n</ol>\n<p>Discover 画面に戻り、アラート動作のテストを行います。再度「Alerts」をクリックし、「Manage rules and connectors」をクリックします。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e09cb45fb505eb399d1f56319495acb5/afd0b/manage_rules_and_connectors.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.87341772151899%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABIklEQVR42p1S7UoEMQzssws+jvg2/vFEPE84OI/d7fYjTZuOSfdW/CdaGLIp6WQmWfd8OOD4fsJfTsyMmBhcBYUrLkvB/eMRdw9vcN4vmKcZlAk5Z/TefyVs0tGajNrxLQKfGhaFmwIjxDjIRAsMHf8/LhdGpgIRI8N3TKrYrxFUrGHWvGge1CopMha/Iuk7q0vE+JgLXj8zXEwJ+YaUVClttkU2O9J/Rtka3kDEo8EaMq5LxPnq4agU1FoBs6qorWrxNh+736OBFYN45LoUZnRpWiNg5SlEcFW3ZB0GiW1Q57l6P9QYicWkFos+MPum1uZtVmMMmFbCyzmBZZu8s23FZCrbUGMPQwi6xTYKdoXWcL8TjW3kFVOoeDrprPUXMsIv9hRyqtvJCYAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"manage_rules_and_connectors.png\"\n        title=\"\"\n        src=\"/static/e09cb45fb505eb399d1f56319495acb5/f058b/manage_rules_and_connectors.png\"\n        srcset=\"/static/e09cb45fb505eb399d1f56319495acb5/c26ae/manage_rules_and_connectors.png 158w,\n/static/e09cb45fb505eb399d1f56319495acb5/6bdcf/manage_rules_and_connectors.png 315w,\n/static/e09cb45fb505eb399d1f56319495acb5/f058b/manage_rules_and_connectors.png 630w,\n/static/e09cb45fb505eb399d1f56319495acb5/40601/manage_rules_and_connectors.png 945w,\n/static/e09cb45fb505eb399d1f56319495acb5/afd0b/manage_rules_and_connectors.png 1153w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>作成した、「test-alert」をクリックします。</p>\n<p>ノードにログインし、次のコマンドを叩きます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> logger <span class=\"token string\">\"This is a test message for /var/log/messages\"</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b1d43820b858616c079754820be2fd05/dcccd/alerts_active_check.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.455696202531648%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAiklEQVR42pWPSw6DMAxEuf+hqp6ji1aoakuA8I1NQgSvCQvUbUcaeTyyPXIxaWR2SgiBjH3fT/6HvAOFiDLNM+IEVT0oIqzryrZtxBjPgKx//Vxzr7rgnMN7TzEMI6aquV0vfO4PTG0pyydNY2lby+tdJd1ibUeV5oypj9B+dOji02c+HQp0XX/4X5q36MosLYPyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alerts_active_check.png\"\n        title=\"\"\n        src=\"/static/b1d43820b858616c079754820be2fd05/f058b/alerts_active_check.png\"\n        srcset=\"/static/b1d43820b858616c079754820be2fd05/c26ae/alerts_active_check.png 158w,\n/static/b1d43820b858616c079754820be2fd05/6bdcf/alerts_active_check.png 315w,\n/static/b1d43820b858616c079754820be2fd05/f058b/alerts_active_check.png 630w,\n/static/b1d43820b858616c079754820be2fd05/40601/alerts_active_check.png 945w,\n/static/b1d43820b858616c079754820be2fd05/dcccd/alerts_active_check.png 1127w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>アラート条件に合致したものを一覧することができました。アラートを確認すると、ステータスが「Recovered」に変わります。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f86c00e9191fb53fdc81e417bc28d295/c0ebd/alerts_recovered.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.21518987341772%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA7UlEQVR42k2QjW7DIAyE8/7vtZdYpK3V1GlNm0Ah2PzmdlBVaiTrjGPOn5lO5xPmeYaqwlgLy2it4f07jmNor6eUEKMyIvM4tNYG0YScK6bAxO2KUisbMosFpdShvSEzb+0Ypl1feSkNQTO1QGLBxURYKZjuxuO2eTwcYw9Y/U5SPyYGJQGHCNXvgkqzTJpKUusCjBMoCT2NfzbFFmi408TRLItybYEXgQRFynlcrCTvxDGmsUUn7HWNfcU8DNMr+ByT70TG4uP7C5/XP/xerrAPP36uq8Gy3BHCc2jv6wA9luUGy7Pj/W1sFMfQf9yug+sW2hvPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alerts_recovered.png\"\n        title=\"\"\n        src=\"/static/f86c00e9191fb53fdc81e417bc28d295/f058b/alerts_recovered.png\"\n        srcset=\"/static/f86c00e9191fb53fdc81e417bc28d295/c26ae/alerts_recovered.png 158w,\n/static/f86c00e9191fb53fdc81e417bc28d295/6bdcf/alerts_recovered.png 315w,\n/static/f86c00e9191fb53fdc81e417bc28d295/f058b/alerts_recovered.png 630w,\n/static/f86c00e9191fb53fdc81e417bc28d295/40601/alerts_recovered.png 945w,\n/static/f86c00e9191fb53fdc81e417bc28d295/c0ebd/alerts_recovered.png 1177w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"12-nginx-によるリバースプロキシと-ssltls-termination\" style=\"position:relative;\"><a href=\"#12-nginx-%E3%81%AB%E3%82%88%E3%82%8B%E3%83%AA%E3%83%90%E3%83%BC%E3%82%B9%E3%83%97%E3%83%AD%E3%82%AD%E3%82%B7%E3%81%A8-ssltls-termination\" aria-label=\"12 nginx によるリバースプロキシと ssltls termination permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12. Nginx によるリバースプロキシと SSL/TLS Termination</h2>\n<p>Kibana に対して Nginx をリバースプロキシとして設定し、SSL/TLS 証明書を使用して安全な接続を提供する手順を説明します。</p>\n<h3 id=\"121-certbot-による-ssl-証明書の取得\" style=\"position:relative;\"><a href=\"#121-certbot-%E3%81%AB%E3%82%88%E3%82%8B-ssl-%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%81%AE%E5%8F%96%E5%BE%97\" aria-label=\"121 certbot による ssl 証明書の取得 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12.1 Certbot による SSL 証明書の取得</h3>\n<p>Certbot を使用して SSL 証明書を取得します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> certbot certonly <span class=\"token parameter variable\">--standalone</span> --agree-tos <span class=\"token parameter variable\">-m</span> taro@example.com <span class=\"token parameter variable\">-d</span> www.example.com</code></pre></div>\n<h3 id=\"122-以前の証明書設定の削除\" style=\"position:relative;\"><a href=\"#122-%E4%BB%A5%E5%89%8D%E3%81%AE%E8%A8%BC%E6%98%8E%E6%9B%B8%E8%A8%AD%E5%AE%9A%E3%81%AE%E5%89%8A%E9%99%A4\" aria-label=\"122 以前の証明書設定の削除 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12.2 以前の証明書設定の削除</h3>\n<p>古い証明書関連の設定を削除します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /etc/letsencrypt/live/your-old-domain.example.com/\n<span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /etc/letsencrypt/archive/your-old-domain.example.com/\n<span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> /etc/letsencrypt/renewal/your-old-domain.example.com.conf</code></pre></div>\n<h3 id=\"123-nginx-のインストールと設定\" style=\"position:relative;\"><a href=\"#123-nginx-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%A8%E8%A8%AD%E5%AE%9A\" aria-label=\"123 nginx のインストールと設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12.3 Nginx のインストールと設定</h3>\n<p>Nginx をインストールします。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> dnf <span class=\"token function\">install</span> nginx <span class=\"token parameter variable\">-y</span></code></pre></div>\n<p>Nginx の設定ファイル<code class=\"language-text\">/etc/nginx/conf.d/kibana.conf</code>を編集し、以下の設定を追加します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">server {\n    listen 8443 ssl;\n    server_name www.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/www.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/www.example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://localhost:5601;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}</code></pre></div>\n<h3 id=\"124-kibana-の設定変更\" style=\"position:relative;\"><a href=\"#124-kibana-%E3%81%AE%E8%A8%AD%E5%AE%9A%E5%A4%89%E6%9B%B4\" aria-label=\"124 kibana の設定変更 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12.4 Kibana の設定変更</h3>\n<p>Kibana の設定ファイル<code class=\"language-text\">/etc/kibana/kibana.yml</code>を編集し、以下の設定を追加します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">server.publicBaseUrl: \"https://www.example.com:8443/\"\nserver.host: \"localhost\"</code></pre></div>\n<h3 id=\"125-nginx-のポート番号変更\" style=\"position:relative;\"><a href=\"#125-nginx-%E3%81%AE%E3%83%9D%E3%83%BC%E3%83%88%E7%95%AA%E5%8F%B7%E5%A4%89%E6%9B%B4\" aria-label=\"125 nginx のポート番号変更 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12.5 Nginx のポート番号変更</h3>\n<p>Nginx のデフォルトポート番号（80 番）を Certbot の影響を避けるため、8888 番などに変更します。</p>\n<h3 id=\"126-証明書の自動更新設定\" style=\"position:relative;\"><a href=\"#126-%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%81%AE%E8%87%AA%E5%8B%95%E6%9B%B4%E6%96%B0%E8%A8%AD%E5%AE%9A\" aria-label=\"126 証明書の自動更新設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12.6 証明書の自動更新設定</h3>\n<p>証明書更新後に Nginx を再起動するためのフックを設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">renew_hook = sudo systemctl reload nginx</code></pre></div>\n<p>証明書更新のドライランを行い、正常に証明書が更新されることを確認します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> certbot renew --dry-run</code></pre></div>\n<h3 id=\"127-kibana-と-nginx-の再起動\" style=\"position:relative;\"><a href=\"#127-kibana-%E3%81%A8-nginx-%E3%81%AE%E5%86%8D%E8%B5%B7%E5%8B%95\" aria-label=\"127 kibana と nginx の再起動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12.7 Kibana と Nginx の再起動</h3>\n<p>Kibana と Nginx を再起動します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl restart kibana\n<span class=\"token function\">sudo</span> systemctl restart nginx</code></pre></div>\n<p>Kibana が SSL 経由でアクセスできることを確認します。</p>\n<h2 id=\"13-オブジェクトストレージへアップロードされたログファイルの可視化\" style=\"position:relative;\"><a href=\"#13-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8%E3%81%B8%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E3%81%95%E3%82%8C%E3%81%9F%E3%83%AD%E3%82%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%8F%AF%E8%A6%96%E5%8C%96\" aria-label=\"13 オブジェクトストレージへアップロードされたログファイルの可視化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>13. オブジェクト・ストレージへアップロードされたログファイルの可視化</h2>\n<p>OCI オブジェクトストレージにアップロードされたログファイルを Kibana で可視化する方法を説明します。</p>\n<h3 id=\"131-ログファイルのダウンロード\" style=\"position:relative;\"><a href=\"#131-%E3%83%AD%E3%82%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89\" aria-label=\"131 ログファイルのダウンロード permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>13.1 ログファイルのダウンロード</h3>\n<p>OCI コンソールから目的のログファイルをダウンロードします。オブジェクトのプレフィックスを使って検索することが可能です。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 275px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/79f42d86cd4c759eb508b15eafc2eed8/6b2ea/object_storage_search_box.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.68354430379747%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA1klEQVR42k2P6W6DMBCEef8XjNTig6NNiA/cFh+gwHRtJ6U/Pnlm5R3tNNYo/MfoO4yaSN+rJjT5jFHnzD5f89ohZmvQpBSQYkDwSyFGjzxbUyzzTNaFtbKtqbAS+b9fvilMF5rj2AEcdEG95Hb9BGsZBskhhMA4jug7gWEYIFgLJhg4byGITnDY2ZZwR2E2B+77A5kvN1NNjWm6QkqJoe9I36C0wsfYoyPP2ndc3i4lWHAGSYHOOWxbOi9MuRrxqhyCr1VLZY9YfDxrp/Sk+rzjl5+/wF+Hx3sVBsysbwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"object_storage_search_box.png\"\n        title=\"\"\n        src=\"/static/79f42d86cd4c759eb508b15eafc2eed8/6b2ea/object_storage_search_box.png\"\n        srcset=\"/static/79f42d86cd4c759eb508b15eafc2eed8/c26ae/object_storage_search_box.png 158w,\n/static/79f42d86cd4c759eb508b15eafc2eed8/6b2ea/object_storage_search_box.png 275w\"\n        sizes=\"(max-width: 275px) 100vw, 275px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"132-ログファイルの展開\" style=\"position:relative;\"><a href=\"#132-%E3%83%AD%E3%82%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%B1%95%E9%96%8B\" aria-label=\"132 ログファイルの展開 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>13.2 ログファイルの展開</h3>\n<p>ダウンロードされたファイルをローカルで展開します。</p>\n<h3 id=\"133-kibana-でのデータ可視化\" style=\"position:relative;\"><a href=\"#133-kibana-%E3%81%A7%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E5%8F%AF%E8%A6%96%E5%8C%96\" aria-label=\"133 kibana でのデータ可視化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>13.3 Kibana でのデータ可視化</h3>\n<p>Kibana の「Analytics」から「Machine Learning」を選択し、「Visualize data from a file」をクリックします。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/70f0a0f971717db105feed9f3bced4f1/84bf8/data_visualizer.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABEklEQVR42p1S0W6DMAzk//+vPECHNNZtMChhQSQBEm52Aoi2dJNm6ZTI4POdnShJEqTnM9IkRXyKIbsOHPM84z8RDeMIhjYDtNawzsERmbX2Ab/FvCA6+ti238iyDHme45XwdrmgKMtAPE2YlgYT3fl0JGJTuF56pfBZlKTSwBiNkgiqrwpVRagr1HWNjsahtfJOjDH+ZIzkcCNcZ9U0AvFLhvePws9Pys4TSCnR9z2GYfD4a7abQpbeCOGL2IIQLZrrlXKNzzMpq+Fzb/Ep4b4zz4iLlQr2FC+L50ZE69L22NfeEDoXcB+jnT22bS4kAXgkDMljC85OaDsFIRU1O346+9obhUfgpxEwetvP/lsJfwBuRhGQQU3PlwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"data_visualizer.png\"\n        title=\"\"\n        src=\"/static/70f0a0f971717db105feed9f3bced4f1/f058b/data_visualizer.png\"\n        srcset=\"/static/70f0a0f971717db105feed9f3bced4f1/c26ae/data_visualizer.png 158w,\n/static/70f0a0f971717db105feed9f3bced4f1/6bdcf/data_visualizer.png 315w,\n/static/70f0a0f971717db105feed9f3bced4f1/f058b/data_visualizer.png 630w,\n/static/70f0a0f971717db105feed9f3bced4f1/40601/data_visualizer.png 945w,\n/static/70f0a0f971717db105feed9f3bced4f1/84bf8/data_visualizer.png 1162w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>展開したファイルを Data Visualizer にアップロードします。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9c6a505d24ace05c48140226d10671a5/000c7/upload_to_data_visualizer.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.632911392405056%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABZ0lEQVR42p1Sy1KEQAzk2/0fq/wIvXnwqBdX3S3dZYF584a2k4H1LkVXMiHp6SQUIUbUtUHdGBjrEEKE91HP1jkYY+GcJ5zC+oDGMkZr1HpM04R1XbEQhSRXdYNrVaO8ViQwaIzRZEs0JGxI7lkoxW67JGy+D54iAmKKWJYFRdu2CLFlQGxCajuklDCOE6Z5znaaMdOfWaAxKtp9UaeWUIWJhKLSWq83R5L5kNiuzy1btmbYqguqSC7t+gH9IOjVDsOoWBYSSmvny4VKRsgjsgUykx2SmG2OQ94b9rzsF2V5wen4BWl9//jfRyqL4+mE75+zBtqu0zY9hyyKBYO2NNAf8rwIie/+rHMcb5suUuRcXKOEHVWaptZNy4a9l9nlLcu573tFx4vlEvGFXOM865ZfP854fDnApAk1B29Dm+Wv/2z54bnC3f0nnt4sDteE97LlFkdumwr4y6xb4l6gkFmrv/7FNsJf9aAJg5dQ924AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"upload_to_data_visualizer.png\"\n        title=\"\"\n        src=\"/static/9c6a505d24ace05c48140226d10671a5/f058b/upload_to_data_visualizer.png\"\n        srcset=\"/static/9c6a505d24ace05c48140226d10671a5/c26ae/upload_to_data_visualizer.png 158w,\n/static/9c6a505d24ace05c48140226d10671a5/6bdcf/upload_to_data_visualizer.png 315w,\n/static/9c6a505d24ace05c48140226d10671a5/f058b/upload_to_data_visualizer.png 630w,\n/static/9c6a505d24ace05c48140226d10671a5/40601/upload_to_data_visualizer.png 945w,\n/static/9c6a505d24ace05c48140226d10671a5/000c7/upload_to_data_visualizer.png 1137w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>中段の「Import」を選択します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ec68934ce908eba6e1c7b1390adbab2d/295bd/import_data.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.08860759493672%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABmUlEQVR42qVSDU+DMBTk//8sdRka3Say6cSpG2pUJtCVQb/o+VoynR9TE5tcHnl9Pe6uDcbjGHv7Bzi/mKLf72M0ihBS7fV6mE4v0bYW1nZwa/P9GZsV5HmORZri8fkZWZYhvbvH7e0caXqHbPmC7bV17kt/g0ApCc45hBC+Nk0DpTWklNSTqOva9zd7vKpQFAUYY74WRYma+p0TIpzPF+iHR0iSBHE8xiXZPKM6GAxwfHyC+CzGyWCI0yjC9eyaZg8RhiGGwxEi6rnZJLl6Ux84Ne5PZVkSmFfQybcf6of8tuxv2/UKnY1RNMHNzRyTyRgzUmF3hfWHFWjTYpFJsFqDr1Z0EUsIys9RUizfwv6AQGqDnDUoV82/lL0pNG1LZGu8lGvwtYTUFo1qd0Lo9mfCvNJIHri//mXBiHgFoYw/KHVHINQ71G+EbmgtDNk1MKbDvyy73AzlyMi2UhrKWFw8NTiaFYjuKQbZoqoESt4gp1hyVtOD17sJ3QvXzpbUvmoizCiGh1LgkSuy7PYNpIuBZvycsTtv+RXJ7vAGU4fgAgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"import_data.png\"\n        title=\"\"\n        src=\"/static/ec68934ce908eba6e1c7b1390adbab2d/f058b/import_data.png\"\n        srcset=\"/static/ec68934ce908eba6e1c7b1390adbab2d/c26ae/import_data.png 158w,\n/static/ec68934ce908eba6e1c7b1390adbab2d/6bdcf/import_data.png 315w,\n/static/ec68934ce908eba6e1c7b1390adbab2d/f058b/import_data.png 630w,\n/static/ec68934ce908eba6e1c7b1390adbab2d/295bd/import_data.png 667w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>インデックス名を指定してデータをインデックス化します（例: uploaded-oci-test）。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/05259a9075bd198c7beba27124a55f3c/0940f/indexed_data.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABe0lEQVR42pVT13KDMBDk//8viTPJuGG6CV0FSWxWwjDOm6OZRde0ujsdUZZluN0SFFmOW5JQjhFfY5R5gdPphPPlgoR+JSX8WpYFz2vTtz3yH0ultWYPUs6ht3bXB2cx0batZtaMsZ4lEN1nBfdM2I0j3pmZEGsWSVXhI45hjYEYJ3ylKc5FEbL0tgP1smlCbN8POLDKru9XQs9smY0jtrSddcG2PPkcMwygbZOXhwweG5XEXQyILA1mO/wInB/let2ytEAS/Ja+tTXGPS5Z1lZ0csKtqxEZGgchIPWMgbdoltRJES4ZlIDQGoI9G5XCRLRios8FAj0bTHq1h51xUc/PuW9x6hqkYkSh5Y6SzS6IcodGZXTwVZSLWe6+nJBMLqrGAe9ZgpxBVxJ/FhmOTR30/yDVAiPbEf2wvLc0DiTx1IdMPS5Di4yBryLZCDvWf6zuiOsaJcenZi/8nHm0Zn4ZDeFnM2qlxXel+AB83dlCKf+Kf/+GV5eflF+bNlW6XkK1+AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"indexed_data.png\"\n        title=\"\"\n        src=\"/static/05259a9075bd198c7beba27124a55f3c/f058b/indexed_data.png\"\n        srcset=\"/static/05259a9075bd198c7beba27124a55f3c/c26ae/indexed_data.png 158w,\n/static/05259a9075bd198c7beba27124a55f3c/6bdcf/indexed_data.png 315w,\n/static/05259a9075bd198c7beba27124a55f3c/f058b/indexed_data.png 630w,\n/static/05259a9075bd198c7beba27124a55f3c/40601/indexed_data.png 945w,\n/static/05259a9075bd198c7beba27124a55f3c/0940f/indexed_data.png 1154w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Data View までできたら OK です。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 349px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/22d328e2af21008e4e917fc64f64d292/e9bf8/data_view.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 105.69620253164558%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADfUlEQVR42o1U2W4kRRDsT+cDeIAHXsBm15YQEoIVCBAPICGZfUDysj52PYvttXc80/dVXX2fE0TWTBtjxFFSKLuyp3OiIiPL+mTvCQ4OP8Pe/lPs7x8QTyG5/U8P7iH7vV3+v2BtNhvYjgtMG7x38RKHd28hy3YDeF4Izw9R1w3+77KGYYDnsmDf4/DqAj85S6DrsFrZhGNipjK0bYuhHzCO4z3k2xnz3krzGoHuiAZlOUDlLZykQsJYNy3KqkGWl3xXoygqVNyXVY2KrJu2M79pmo7YRsvOehxdKXz3wsU3xzZ+vlQ4us5w4TdQusKtnSBRJb5+foPTtyEmMknSDDmL+2GCTBdQSvO3BaIkgxUWA05WBY4WIX5ZBDi50zizC9zEDTTZu4FmgRInlz6WjqIygylWkKUU1mSvshyaOZUVsESbpmkwTQM2m8no0FPPOfZdT0l7vn+o2WgwTpNBv8tt2FgryzROT88RRTFc10MYRqYRvh8wl7DTgXGB7D3CZ9cfr4lFT89e8dsYVl3XJiH2mZc8/9v+8eroiojFpDFkmOHV6wWCIMR6bRMO/CAwjAKyCchYmAnz+z94gLlgXpRGX8NQtBrHaeelLeSloOv+9N5cQbTast7uW9onSRSbomFV7JbjeIaZbbtwqKNIMB9V1mKVwolLuHHFWCHWLbykNrmI/hVCUizT+ZahFBXKMmKCudAcs7JDWfcomx5FQ9uULQegQcXnpp/MkaW5ml60xDIyDeKrKFZbgzIKEho2pteMHLvGtW2PDz96gvc/+Nj8pii3E1NVFaJUCUMmqFPFDolJ851BE5pV6RIpn1tq2fYjOmpbk+Wzb3/EF89+IEuOYjuaMZRj1/S0FXGs7KjEmpNxtizx8l3BWabIxYgoHxBzkkLd/wW63aDogZgnCDluCXUcWFCaZmVklNe8FHgxrJPGFFalaDWavKZ2EmU/Q1FD0bWoW56sg+axZZpEcqOhrJ7CeraNwPPg0o9JFPHaUgjpQYkPm/R4yfjKkc196Oc5Vix6V5a41RrLosA75gRXaYprFpN3a7rhMWwBv7X53crLePwK1rVKcZxneB75+OrqDb68XODzi3N8v7wxz4Jf0xi/6QwvtPobjnOF10mCN0uFBW8qy4lTnC/X+H11h9vAx10cYRmFWDGukxgrQnL/hCURcHybjtM1An8AOfIuHSB5cykAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"data_view.png\"\n        title=\"\"\n        src=\"/static/22d328e2af21008e4e917fc64f64d292/e9bf8/data_view.png\"\n        srcset=\"/static/22d328e2af21008e4e917fc64f64d292/c26ae/data_view.png 158w,\n/static/22d328e2af21008e4e917fc64f64d292/6bdcf/data_view.png 315w,\n/static/22d328e2af21008e4e917fc64f64d292/e9bf8/data_view.png 349w\"\n        sizes=\"(max-width: 349px) 100vw, 349px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Kibana の「Discover」から作成したインデックスを指定し、ログを可視化します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cb02b65f948cb3e579a34a9bbecd51c5/73a2e/discover_dashboard2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.16455696202532%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB5klEQVR42nWSyZLTMBCG/XjcOHLhEZJMZpKZmqEK3osbBa/AUpwgQxLHjvdFsmTJP38rCTU54Kp2b1L3J6mj2/snzGdLLG/vcbNcY7Fc4W71iMenD5T3uH94F3JXcveA2WKN+WKF+c2a9gqv3szw+u0S0fe4RtYMUMbBjg7ee4zUznn87/MTMPLX6RG9tlCDxcevFT7/rBHltULZKNStRlX3UEqj7xXMYGC0weikyQTHRic9Be2niTkPF5qfQKwdEVVVhYnOxAXGWi4aQQedGfDp9zd82fwIVJIXCYShuL+Ki/iRBUf+/h2FnbWx4chF1+BXmeJQFxj0gGEYgtZaB1u07BU6QzKhk31XBY31SIseZdVAKwVn3ZlECALO2b6mNYbXQxCRSLPrBd2yuCQVY2KXZYUsL9C0HYqiZKMaOf26blA3LRpKRbs6+3L/kSBfPinSdJqigt4fjnjextjFCbb7BJs/e2yedyG+i9MQu2iJtdwXvRwHGRXN19XhzixpSsRJSsoSSXJEeswRH07+MSsCvegkzZBRB8KXBWUOhaxuFbtpHJIsdI/ZPWZBsbf7AwvkzOWkSpnLmMtCrO8HRDIqig8gc2V5fM0XtIw578JLdl0fdMt7FALxFX2x5SSXWNt1GIzBX4HMNM6WM3E6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"discover_dashboard2.png\"\n        title=\"\"\n        src=\"/static/cb02b65f948cb3e579a34a9bbecd51c5/f058b/discover_dashboard2.png\"\n        srcset=\"/static/cb02b65f948cb3e579a34a9bbecd51c5/c26ae/discover_dashboard2.png 158w,\n/static/cb02b65f948cb3e579a34a9bbecd51c5/6bdcf/discover_dashboard2.png 315w,\n/static/cb02b65f948cb3e579a34a9bbecd51c5/f058b/discover_dashboard2.png 630w,\n/static/cb02b65f948cb3e579a34a9bbecd51c5/40601/discover_dashboard2.png 945w,\n/static/cb02b65f948cb3e579a34a9bbecd51c5/78612/discover_dashboard2.png 1260w,\n/static/cb02b65f948cb3e579a34a9bbecd51c5/73a2e/discover_dashboard2.png 1439w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"134-インデックスの削除\" style=\"position:relative;\"><a href=\"#134-%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%81%AE%E5%89%8A%E9%99%A4\" aria-label=\"134 インデックスの削除 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>13.4 インデックスの削除</h3>\n<p>使い終わったインデックスは Kibana の「Stack Management」から削除して、システムの整理を行います。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ea412530b3b64536cc92060acce963c4/bed7a/remove_index.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.24050632911392%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABOUlEQVR42p2QyW6DMBRF/cPdVOmmIYMJGb+pm+676abZpotIEEIgDB4w5vbhjJVaVarF0XtY+HKe2WC+wOOzj4eeh95TH96Ag/szBLMlpvOVY8ynGI4mN/gEIx7AG3L0iTH3sZgGWC2XYEkhUGgLelBWFdI0RZZlqGuDv1bbnuo2NXhZC7xtJFgcH5AkR1SiRp4XiKIQYRhSn0MpBSnlFSGE22spqcNa6wLDTOH1I8X7piBDClOkJ1VDVo0zs/Sxaag3F4yr5vze2NZhL/WiSotF0R5xktG4mkJrMlHQXaht3UgnG1ytut6ew0qybsiy601j3Vm2i4/IC0VIGlu64B1Z17q+XdQPdOOuD/tve0ZrsM9tgrzULqiqJI2v3d9uRr9jrL27zxPskOZkpilUQUh9lmrxn9Wd+gJzzVZt0ZBDMQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"remove_index.png\"\n        title=\"\"\n        src=\"/static/ea412530b3b64536cc92060acce963c4/f058b/remove_index.png\"\n        srcset=\"/static/ea412530b3b64536cc92060acce963c4/c26ae/remove_index.png 158w,\n/static/ea412530b3b64536cc92060acce963c4/6bdcf/remove_index.png 315w,\n/static/ea412530b3b64536cc92060acce963c4/f058b/remove_index.png 630w,\n/static/ea412530b3b64536cc92060acce963c4/40601/remove_index.png 945w,\n/static/ea412530b3b64536cc92060acce963c4/78612/remove_index.png 1260w,\n/static/ea412530b3b64536cc92060acce963c4/bed7a/remove_index.png 1437w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"FEKスタック(Fluentd & Elasticsearch & Kibana)によるログ監視基盤構築手順","date":"2024-08-23","description":"FEKスタック（Fluentd, Elasticsearch, Kibana）を効率的にインストールし、設定するための手順を詳細に説明します。","tags":["SRE","Fluentd","Elasticsearch","Kibana","ログ管理"],"featuredImage":{"publicURL":"/static/29be8d04019e2ec847dc8d839025ac07/keyboard.jpg","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#c86818","images":{"fallback":{"src":"/static/29be8d04019e2ec847dc8d839025ac07/3c367/keyboard.jpg","srcSet":"/static/29be8d04019e2ec847dc8d839025ac07/19e71/keyboard.jpg 128w,\n/static/29be8d04019e2ec847dc8d839025ac07/68974/keyboard.jpg 256w,\n/static/29be8d04019e2ec847dc8d839025ac07/3c367/keyboard.jpg 512w","sizes":"(min-width: 512px) 512px, 100vw"},"sources":[{"srcSet":"/static/29be8d04019e2ec847dc8d839025ac07/6766a/keyboard.webp 128w,\n/static/29be8d04019e2ec847dc8d839025ac07/22bfc/keyboard.webp 256w,\n/static/29be8d04019e2ec847dc8d839025ac07/d689f/keyboard.webp 512w","type":"image/webp","sizes":"(min-width: 512px) 512px, 100vw"}]},"width":512,"height":512}}}}},"relatedPosts":{"nodes":[]},"previous":{"fields":{"slug":"/python3-basic-cert-exam-experience/"},"frontmatter":{"title":"Python3 エンジニア認定基礎試験 受験記録"}},"next":{"fields":{"slug":"/dnf-1/"},"frontmatter":{"title":"DNFの概要とパッケージ、リポジトリーの検索 - DNF(1)"}}},"pageContext":{"id":"b55b743d-2f31-5b03-b8dc-708859ccad1b","previousPostId":"2b23469d-034c-5bce-88ba-2ee6daf9ee6f","nextPostId":"18c1b552-ef55-540b-811c-066c95b4f191","relatedPosts":[]}},"staticQueryHashes":["2841359383"],"slicesMap":{}}