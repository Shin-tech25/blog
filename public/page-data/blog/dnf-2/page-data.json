{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/dnf-2/","result":{"data":{"site":{"siteMetadata":{"title":"Developer's blog"}},"markdownRemark":{"id":"8628a253-daa6-502d-b12c-2fd586adfd0b","excerpt":"概要 インフラエンジニアならコマンドを使用したことが無いという人はまずいない、と言っても過言ではないくらいよく使うパッケージ管理コマンドですが、パッケージ管理は奥が深く、しっかりと理解するのも難しく、自分の学習も兼ねてまとめてみました。今回は 2 回目になります。 コマンドに関しては、Red Hat…","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%E6%A6%82%E8%A6%81\">概要</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\">パッケージのインストール</a></p>\n<ul>\n<li><a href=\"#%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%83%BC%E3%81%8B%E3%82%89%E3%81%AE%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\">リポジトリーからのパッケージインストール</a></li>\n<li><a href=\"#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB-rpm-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%8B%E3%82%89%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\">ローカル RPM ファイルからのインストール</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\">パッケージグループのインストール</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\">モジュールコンテンツのインストール</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%81%AE%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%81%A8%E3%83%97%E3%83%AD%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%AE%9A%E7%BE%A9\">カスタムのデフォルトモジュールストリームとプロファイルの定義</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E3%81%AE%E6%9B%B4%E6%96%B0\">コンテンツの更新</a></p>\n<ul>\n<li><a href=\"#%E6%9B%B4%E6%96%B0%E3%81%AE%E7%A2%BA%E8%AA%8D\">更新の確認</a></li>\n<li><a href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E6%9B%B4%E6%96%B0\">パッケージの更新</a></li>\n<li><a href=\"#%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3%E3%83%BC%E9%96%A2%E9%80%A3%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E6%9B%B4%E6%96%B0\">セキュリティー関連パッケージの更新</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#references\">References</a></p>\n</li>\n</ul>","html":"<h2 id=\"概要\" style=\"position:relative;\"><a href=\"#%E6%A6%82%E8%A6%81\" aria-label=\"概要 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>概要</h2>\n<p>インフラエンジニアなら<code class=\"language-text\">dnf</code>コマンドを使用したことが無いという人はまずいない、と言っても過言ではないくらいよく使うパッケージ管理コマンドですが、パッケージ管理は奥が深く、しっかりと理解するのも難しく、自分の学習も兼ねてまとめてみました。今回は 2 回目になります。</p>\n<p><code class=\"language-text\">dnf</code>コマンドに関しては、Red Hat 本家が出しているドキュメントが最も参考になると思います。この記事は、以下のドキュメントから適宜抜粋し編纂したものです。しっかりと理解したい方は以下も参照してください。</p>\n<p><a href=\"https://docs.redhat.com/ja-jp/documentation/red_hat_enterprise_linux/9/pdf/managing_software_with_the_dnf_tool/Red_Hat_Enterprise_Linux-9-Managing_software_with_the_DNF_tool-ja-JP.pdf\">Red Hat Enterprise Linux 9 DNF ツールを使用したソフトウェアの管理</a></p>\n<p>今回は、上記の「第 5 章 RHEL 9 コンテンツのインストール」および「第 6 章 RHEL 9 コンテンツの更新」の内容になります。</p>\n<h2 id=\"パッケージのインストール\" style=\"position:relative;\"><a href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\" aria-label=\"パッケージのインストール permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>パッケージのインストール</h2>\n<p>ソフトウェアがデフォルトのインストールに含まれていない場合は、手動でインストールできます。DNF は依存関係を解決してインストールします。</p>\n<p>前提として、インストールするパッケージ名が分かっていなければなりません。これについては、前回の記事を参考にし、パッケージ検索の方法について理解してください。</p>\n<h3 id=\"リポジトリーからのパッケージインストール\" style=\"position:relative;\"><a href=\"#%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%83%BC%E3%81%8B%E3%82%89%E3%81%AE%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\" aria-label=\"リポジトリーからのパッケージインストール permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>リポジトリーからのパッケージインストール</h3>\n<p>これが最も使われるパッケージインストール方法だと思われます。以下のコマンドでパッケージインストールが可能です。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf <span class=\"token function\">install</span> <span class=\"token operator\">&lt;</span>package_name_<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span> <span class=\"token operator\">&lt;</span>package_name_<span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span> <span class=\"token punctuation\">..</span>.</code></pre></div>\n<p>i686 や x86_64 などの複数のアーキテクチャをサポートするシステムにパッケージをインストールする場合は、パッケージ名にそれを追加することで、パッケージのアーキテクチャを指定できます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf <span class=\"token function\">install</span> <span class=\"token operator\">&lt;</span>package_name<span class=\"token operator\">></span>.<span class=\"token operator\">&lt;</span>architecture<span class=\"token operator\">></span></code></pre></div>\n<h3 id=\"ローカル-rpm-ファイルからのインストール\" style=\"position:relative;\"><a href=\"#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB-rpm-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%8B%E3%82%89%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\" aria-label=\"ローカル rpm ファイルからのインストール permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ローカル RPM ファイルからのインストール</h3>\n<p>ローカル RPM ファイルからのインストールも可能です。パッケージに依存関係がある場合は、これらの RPM ファイルへのパスも指定します。指定しなかった場合、DNF はリポジトリーから依存関係をダウンロードします。依存関係がリポジトリーで利用できない場合はインストールに失敗します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf <span class=\"token function\">install</span> <span class=\"token operator\">&lt;</span>path_to_RPM_file<span class=\"token operator\">></span></code></pre></div>\n<h2 id=\"パッケージグループのインストール\" style=\"position:relative;\"><a href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\" aria-label=\"パッケージグループのインストール permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>パッケージグループのインストール</h2>\n<p>パッケージグループには複数のパッケージがバンドルされています。パッケージグループを使用すると、グループに割り当てられたすべてのパッケージを 1 回の手順でインストールできます。</p>\n<p>前提として、インストールするパッケージグループ名が分かっていなければなりません。これについては、前回の記事を参考にし、パッケージグループ検索の方法について理解してください。</p>\n<p><strong>手順</strong></p>\n<p>以下のコマンドでパッケージグループをインストールします。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf group <span class=\"token function\">install</span> <span class=\"token operator\">&lt;</span>group_name_or_ID<span class=\"token operator\">></span></code></pre></div>\n<h2 id=\"モジュールコンテンツのインストール\" style=\"position:relative;\"><a href=\"#%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\" aria-label=\"モジュールコンテンツのインストール permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>モジュールコンテンツのインストール</h2>\n<p>特定のソフトウェアについては、Red Hat がモジュールを提供しています。モジュールを使用して、特定のバージョン（ストリーム）とパッケージのセット（プロファイル）をインストールできます。</p>\n<p><strong>手順</strong></p>\n<p>インストールするパッケージを提供するモジュールをリスト表示します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf module list <span class=\"token operator\">&lt;</span>module_name<span class=\"token operator\">></span></code></pre></div>\n<p>モジュールをインストールします。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf module <span class=\"token function\">install</span> <span class=\"token operator\">&lt;</span>module_name<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>stream<span class=\"token operator\">></span>/<span class=\"token operator\">&lt;</span>profile<span class=\"token operator\">></span></code></pre></div>\n<p>ストリームのデフォルトプロファイルが定義されている場合は、コマンドの<code class=\"language-text\">/&lt;profile></code>を省略して、このストリームのデフォルトプロファイルをインストールできます。</p>\n<p>たとえば、nodejs モジュールのストリーム 18 からデフォルトのプロファイル (common) をイ\nンストールするには、次のように入力します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf module <span class=\"token function\">install</span> nodejs:18\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\nPackage Architecture Version Repository Size\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\nRed Hat Enterprise Linux <span class=\"token number\">9</span> DNF ツールを使用したソフトウェアの管理\n<span class=\"token number\">18</span>\nInstalling group/module packages:\nnodejs x86_64 <span class=\"token punctuation\">..</span>. rhel-9-for-x86_64-appstream-rpms <span class=\"token number\">12</span> M\n<span class=\"token function\">npm</span> x86_64 <span class=\"token punctuation\">..</span>. rhel-9-for-x86_64-appstream-rpms <span class=\"token number\">2.5</span> M\nInstalling weak dependencies:\nnodejs-docs noarch <span class=\"token punctuation\">..</span> rhel-9-for-x86_64-appstream-rpms <span class=\"token number\">7.6</span> M\nnodejs-full-i18n x86_64 <span class=\"token punctuation\">..</span> rhel-9-for-x86_64-appstream-rpms <span class=\"token number\">8.4</span> M\nInstalling module profiles:\nnodejs/common\nEnabling module streams:\nnodejs <span class=\"token number\">18</span></code></pre></div>\n<p><strong>検証</strong></p>\n<p>正しいモジュールストリームが有効になっており（<code class=\"language-text\">[e]</code>）、必要なプロファイルがインストールされている（<code class=\"language-text\">[i]</code>）ことを確認します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf module list nodejs\n\nUpdating Subscription Management repositories.\nLast metadata expiration check: <span class=\"token number\">0</span>:33:24 ago on Mon <span class=\"token number\">24</span> Jul <span class=\"token number\">2023</span> 04:59:01 PM CEST.\nRed Hat Enterprise Linux <span class=\"token number\">9</span> <span class=\"token keyword\">for</span> x86_64 - AppStream <span class=\"token punctuation\">(</span>RPMs<span class=\"token punctuation\">)</span>\nName Stream Profiles Summary\nnodejs <span class=\"token number\">18</span> <span class=\"token punctuation\">[</span>e<span class=\"token punctuation\">]</span> common <span class=\"token punctuation\">[</span>d<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>, development, minimal, s2i Javascript runtime\n<span class=\"token punctuation\">..</span>.\nHint: <span class=\"token punctuation\">[</span>d<span class=\"token punctuation\">]</span>efault, <span class=\"token punctuation\">[</span>e<span class=\"token punctuation\">]</span>nabled, <span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span>disabled, <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>nstalled</code></pre></div>\n<h2 id=\"カスタムのデフォルトモジュールストリームとプロファイルの定義\" style=\"position:relative;\"><a href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%81%AE%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%81%A8%E3%83%97%E3%83%AD%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%AE%9A%E7%BE%A9\" aria-label=\"カスタムのデフォルトモジュールストリームとプロファイルの定義 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>カスタムのデフォルトモジュールストリームとプロファイルの定義</h2>\n<p>Red Hat Enterprise Linux 9 では、AppStream リポジトリーにデフォルトのストリームが定義されていません。ただし、デフォルトのモジュールストリームとデフォルトのモジュールプロファイルを設定できます。設定すると、デフォルトのモジュールのストリームとプロファイルをインストールするときに、その情報を省略できます。</p>\n<p><strong>手順</strong></p>\n<p><code class=\"language-text\">dnf module list &lt;module_name></code>コマンドを使用して、利用可能なストリームとそのプロファイルを表示します。次に例を示します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf module list nodejs\n\nName Stream Profiles Summary\nnodejs <span class=\"token number\">18</span> common <span class=\"token punctuation\">[</span>d<span class=\"token punctuation\">]</span>, development, minimal, s2i Javascript runtime</code></pre></div>\n<p>この例では、nodejs:18 はデフォルトストリームとして設定されておらず、このストリームの\nデフォルトプロファイルは common です。</p>\n<p><code class=\"language-text\">etc/dnf/modules.defaults.d/</code>ディレクトリーに YAML ファイルを作成して、モジュールのデ\nフォルトのストリームとプロファイルを定義します。</p>\n<p>たとえば、次の内容を含む<code class=\"language-text\">/etc/dnf/modules.defaults.d/nodejs.yaml</code>ファイルを作成し\nて、nodejs モジュールのデフォルトストリームとして 18 を定義し、デフォルトプロファイル\nとして minimum を定義します。</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">document</span><span class=\"token punctuation\">:</span> modulemd<span class=\"token punctuation\">-</span>defaults\n<span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">module</span><span class=\"token punctuation\">:</span> nodejs\n    <span class=\"token key atrule\">stream</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"18\"</span>\n    <span class=\"token key atrule\">profiles</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">'18'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>minimal<span class=\"token punctuation\">]</span></code></pre></div>\n<p><strong>検証</strong></p>\n<p><code class=\"language-text\">dnf module list &lt;module_name></code>コマンドを使用して、新しいデフォルトのストリームとプロ\nファイルの設定を確認します。次に例を示します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf module list nodejs\n\nName   Stream Profiles                          Summary\nnodejs <span class=\"token number\">18</span> <span class=\"token punctuation\">[</span>d<span class=\"token punctuation\">]</span> common, development, minimal <span class=\"token punctuation\">[</span>d<span class=\"token punctuation\">]</span>, s2i Javascript runtime</code></pre></div>\n<h2 id=\"コンテンツの更新\" style=\"position:relative;\"><a href=\"#%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E3%81%AE%E6%9B%B4%E6%96%B0\" aria-label=\"コンテンツの更新 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>コンテンツの更新</h2>\n<p>DNF では、システムに保留中の更新があるかどうかを確認できます。更新が必要なパッケージをリスト表示して、1 つのパッケージ、複数のパッケージ、またはすべてのパッケージを一度に更新できます。更新を選択したパッケージに依存関係がある場合は、これらの依存関係も更新されます。</p>\n<h3 id=\"更新の確認\" style=\"position:relative;\"><a href=\"#%E6%9B%B4%E6%96%B0%E3%81%AE%E7%A2%BA%E8%AA%8D\" aria-label=\"更新の確認 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更新の確認</h3>\n<p>システムにインストールされているパッケージに利用可能な更新があるかどうかを識別するには、それらをリストします。</p>\n<p>インストールされたパッケージの利用可能な更新を確認します。以下のコマンドは、更新が利用可能なパッケージおよびその依存関係のリストを表示します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf check-update</code></pre></div>\n<h3 id=\"パッケージの更新\" style=\"position:relative;\"><a href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E6%9B%B4%E6%96%B0\" aria-label=\"パッケージの更新 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>パッケージの更新</h3>\n<p>DNF を使用すると、単一のパッケージ、パッケージグループ、またはすべてのパッケージとその依存関係を一度に更新できます。</p>\n<p>シナリオに応じて、次のいずれかのオプションを使用して更新を適用します。</p>\n<ul>\n<li>すべてのパッケージとその依存関係を更新するには、次のコマンドを実行します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf upgrade</code></pre></div>\n<ul>\n<li>単一のパッケージを更新するには、次のように入力します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf upgrade <span class=\"token operator\">&lt;</span>package_name<span class=\"token operator\">></span></code></pre></div>\n<ul>\n<li>特定のパッケージグループからのパッケージのみを更新するには、次のように実行します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf group upgrade <span class=\"token operator\">&lt;</span>group_name<span class=\"token operator\">></span></code></pre></div>\n<h3 id=\"セキュリティー関連パッケージの更新\" style=\"position:relative;\"><a href=\"#%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3%E3%83%BC%E9%96%A2%E9%80%A3%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E6%9B%B4%E6%96%B0\" aria-label=\"セキュリティー関連パッケージの更新 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>セキュリティー関連パッケージの更新</h3>\n<p>DNF を使用して、セキュリティー関連のパッケージを更新できます。</p>\n<p>以下のコマンドは、システム上で利用可能なすべてのセキュリティ関連のパッケージを最新バージョンにアップグレードします。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf upgrade <span class=\"token parameter variable\">--security</span></code></pre></div>\n<p>以下のコマンドは、セキュリティに関わる最小限のバージョンへのアップグレードのみ行われ、余分な機能追加や修正が含まれる最新バージョンには更新しません。システムの安定性を維持しながらセキュリティ対策を行いたい場合に便利です。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf upgrade-minimal <span class=\"token parameter variable\">--security</span></code></pre></div>\n<h2 id=\"references\" style=\"position:relative;\"><a href=\"#references\" aria-label=\"references permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>References</h2>\n<ul>\n<li><a href=\"https://docs.redhat.com/ja-jp/documentation/red_hat_enterprise_linux/9/pdf/managing_software_with_the_dnf_tool/Red_Hat_Enterprise_Linux-9-Managing_software_with_the_DNF_tool-ja-JP.pdf\">Red Hat Enterprise Linux 9 DNF ツールを使用したソフトウェアの管理</a></li>\n<li><a href=\"https://docs.aws.amazon.com/ja_jp/linux/al2023/ug/package-management.html\">パッケージ管理ツール</a></li>\n<li><a href=\"https://atmarkit.itmedia.co.jp/ait/articles/2001/09/news018.html\">【 dnf 】コマンド（基礎編）――ソフトウェア（パッケージ）をインストールする：Linux 基本コマンド Tips（368） - ＠IT</a></li>\n<li><a href=\"https://qiita.com/zenden/items/de1860f9e976d87a1c6c\">yum の後継、dnf について（Linux2023） #AWS - Qiita</a></li>\n<li><a href=\"https://int-design.jp/content/dnf/\">パッケージ管理 (dnf yum) – Int Design LLC.</a></li>\n<li><a href=\"https://qiita.com/Snow315/items/123ba83064019064b36d\">定時帰る術-Linux パッケージ管理（dnf コマンド） #Linux - Qiita</a></li>\n<li><a href=\"https://learn.microsoft.com/ja-jp/troubleshoot/azure/virtual-machines/linux/yum-dnf-common-issues\">yum および dnf パッケージ マネージャーの一般的な問題のトラブルシューティング - Virtual Machines | Microsoft Learn</a></li>\n<li><a href=\"https://www.infra-linux.com/menu-linux5/yum-dnf/\">yum と dnf について | Linux 入門 PartⅣ | 演習で学ぶインフラ Linux</a></li>\n<li><a href=\"https://atmarkit.itmedia.co.jp/ait/articles/2001/17/news016.html\">【 dnf 】コマンド（応用編その 3）――複雑な条件を付けてソフトウェア（パッケージ）の情報を表示する：Linux 基本コマンド Tips（371） - ＠IT</a></li>\n</ul>","frontmatter":{"title":"DNFによるコンテンツのインストール - DNF(2)","date":"2024-09-22","description":"DNFコマンドとパッケージ管理システムの概念について体系的にまとめました。今回は2回目になります。DNFコマンドによるコンテンツインストールを扱います。","tags":["Linux","dnf","RHEL"],"featuredImage":{"publicURL":"/static/1cb0109ae2cc2401406c55b7410e77b4/linux.jpg","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#c8c8c8","images":{"fallback":{"src":"/static/1cb0109ae2cc2401406c55b7410e77b4/3c367/linux.jpg","srcSet":"/static/1cb0109ae2cc2401406c55b7410e77b4/19e71/linux.jpg 128w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/68974/linux.jpg 256w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/3c367/linux.jpg 512w","sizes":"(min-width: 512px) 512px, 100vw"},"sources":[{"srcSet":"/static/1cb0109ae2cc2401406c55b7410e77b4/6766a/linux.webp 128w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/22bfc/linux.webp 256w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/d689f/linux.webp 512w","type":"image/webp","sizes":"(min-width: 512px) 512px, 100vw"}]},"width":512,"height":512}}}}},"relatedPosts":{"nodes":[{"fields":{"slug":"/dnf-1/"},"frontmatter":{"title":"DNFの概要とパッケージ、リポジトリーの検索 - DNF(1)","date":"2024-09-17","tags":["Linux","dnf","RHEL"],"description":"DNFコマンドとパッケージ管理システムの概念について体系的にまとめました。パッケージ管理は実務上よく使用されますが、しっかりと理解されている方は少ないと思います。そこで、自分の学習も兼ねてRedHat本家ドキュメントを参照しつつ編集しました。","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#c8c8c8","images":{"fallback":{"src":"/static/1cb0109ae2cc2401406c55b7410e77b4/3c367/linux.jpg","srcSet":"/static/1cb0109ae2cc2401406c55b7410e77b4/19e71/linux.jpg 128w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/68974/linux.jpg 256w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/3c367/linux.jpg 512w","sizes":"(min-width: 512px) 512px, 100vw"},"sources":[{"srcSet":"/static/1cb0109ae2cc2401406c55b7410e77b4/6766a/linux.webp 128w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/22bfc/linux.webp 256w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/d689f/linux.webp 512w","type":"image/webp","sizes":"(min-width: 512px) 512px, 100vw"}]},"width":512,"height":512}}}}},{"fields":{"slug":"/dnf-error-check/"},"frontmatter":{"title":"RHEL系OSでリポジトリ構成のエラーを検証する方法","date":"2025-01-04","tags":["Linux","dnf"],"description":"RHEL系OSでリポジトリ構成のエラーを検証する方法","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#c8c8c8","images":{"fallback":{"src":"/static/1cb0109ae2cc2401406c55b7410e77b4/3c367/linux.jpg","srcSet":"/static/1cb0109ae2cc2401406c55b7410e77b4/19e71/linux.jpg 128w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/68974/linux.jpg 256w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/3c367/linux.jpg 512w","sizes":"(min-width: 512px) 512px, 100vw"},"sources":[{"srcSet":"/static/1cb0109ae2cc2401406c55b7410e77b4/6766a/linux.webp 128w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/22bfc/linux.webp 256w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/d689f/linux.webp 512w","type":"image/webp","sizes":"(min-width: 512px) 512px, 100vw"}]},"width":512,"height":512}}}}},{"fields":{"slug":"/managing-dnf-history/"},"frontmatter":{"title":"Managing dnf Transactions with dnf history and Rollback","date":"2025-07-10","tags":["dnf","Linux","RHEL"],"description":"Learn how to use dnf history to inspect and revert package transactions on RHEL-based systems using undo and rollback commands.","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#c8c8c8","images":{"fallback":{"src":"/static/1cb0109ae2cc2401406c55b7410e77b4/3c367/linux.jpg","srcSet":"/static/1cb0109ae2cc2401406c55b7410e77b4/19e71/linux.jpg 128w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/68974/linux.jpg 256w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/3c367/linux.jpg 512w","sizes":"(min-width: 512px) 512px, 100vw"},"sources":[{"srcSet":"/static/1cb0109ae2cc2401406c55b7410e77b4/6766a/linux.webp 128w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/22bfc/linux.webp 256w,\n/static/1cb0109ae2cc2401406c55b7410e77b4/d689f/linux.webp 512w","type":"image/webp","sizes":"(min-width: 512px) 512px, 100vw"}]},"width":512,"height":512}}}}}]},"previous":{"fields":{"slug":"/dnf-1/"},"frontmatter":{"title":"DNFの概要とパッケージ、リポジトリーの検索 - DNF(1)"}},"next":{"fields":{"slug":"/saitama-hoikuen-online-application/"},"frontmatter":{"title":"さいたま市 認可保育園のオンライン申請 新年度入園"}}},"pageContext":{"id":"8628a253-daa6-502d-b12c-2fd586adfd0b","previousPostId":"18c1b552-ef55-540b-811c-066c95b4f191","nextPostId":"83de4284-3241-5246-a89d-56d1c17df233","relatedPosts":["/dnf-1/","/dnf-error-check/","/managing-dnf-history/"]}},"staticQueryHashes":["2841359383"],"slicesMap":{}}