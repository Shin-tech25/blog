# 開発ガイドライン: ブランチ戦略とコミットメッセージ規則

## 1. 概要
このドキュメントでは、Gatsby.jsを用いたポートフォリオの運用・開発におけるブランチ戦略とコミットメッセージの規則について説明します。効率的な開発と運用を支援するために、各ブランチの目的や運用フローを定義し、コミットメッセージを統一して管理しやすくします。

## 2. ブランチ戦略

### 2.1 `main` ブランチ
- **目的**: 本番環境にデプロイされる安定したコード
- **運用**: 常に本番環境にデプロイ可能な状態を保持
- **デプロイ**: `main` ブランチにマージ後、自動デプロイ

### 2.2 `develop` ブランチ
- **目的**: 開発中の機能や変更を集約
- **運用**: `feature` や `hotfix` ブランチの変更を集約
- **デプロイ**: ステージング環境にデプロイ

### 2.3 `content` ブランチ
- **目的**: 記事やコンテンツの更新専用
- **運用**: 記事追加・修正など、コンテンツ変更のみを行う
- **デプロイ**: `content` ブランチを `main` にマージ後、自動デプロイ

### 2.4 `feature/xxx` ブランチ
- **目的**: 新機能の追加（UI改善、新しいページ、SEO対策等）
- **運用**: `develop` ブランチから分岐し、機能を追加
- **デプロイ**: 完了後、`develop` ブランチにマージ

### 2.5 `hotfix/xxx` ブランチ
- **目的**: 本番環境の緊急バグ修正
- **運用**: `main` ブランチから分岐し、緊急修正を行う
- **デプロイ**: 修正後、`main` と `develop` にマージ

## 3. コミットメッセージ規則

### 3.1 構成
コミットメッセージは、以下の形式に従って記述します。

```
<タイプ>(<影響範囲>): <変更内容の簡潔な説明>

<詳細な説明（任意）>
```

### 3.2 タイプの一覧
- **feat**: 新機能追加
- **fix**: バグ修正
- **docs**: ドキュメントの変更
- **style**: コードのフォーマット修正
- **refactor**: コードのリファクタリング
- **perf**: パフォーマンス改善
- **test**: テスト関連の変更
- **chore**: 雑多な作業

### 3.3 コミットメッセージ例
- `feat(blog): 新しい投稿ページの作成`
- `fix(blog): 記事の画像が表示されないバグ修正`
- `docs: READMEにブログのセットアップ手順を追記`
- `style(css): 不要なインデントを削除`
- `refactor(post): 記事取得ロジックのリファクタリング`
- `perf(images): 画像の圧縮率を上げて読み込み速度を改善`
- `test(blog): 記事ページのユニットテストを追加`
- `chore(build): Gatsbyプラグインのバージョンを更新`

### 3.4 コミット頻度
- **小さく頻繁に**: 作業ごとに小さくコミットを行い、変更内容を分かりやすく記録。

## 4. 運用フロー

### 4.1 コンテンツ更新
1. `content` ブランチで記事やコンテンツを更新
2. 更新後、`content` を `main` にマージ
3. `main` ブランチが自動的に本番環境にデプロイ

### 4.2 機能開発
1. `feature/xxx` ブランチで機能を開発
2. 完了後、`feature/xxx` を `develop` にマージ
3. ステージング環境でテスト
4. テスト後、`develop` を `main` にマージし、本番環境にデプロイ

### 4.3 バグ修正
1. `hotfix/xxx` ブランチで修正
2. 修正後、`main` と `develop` にマージ
3. 本番環境に即座に反映

## 5. Git フローと命名規則
- **コンテンツ更新**: `content`
- **機能開発**: `feature/機能名`
- **緊急修正**: `hotfix/修正内容`
- **リリース準備**: `release/バージョン番号`